```
subscribe(connection::MQTTConnection, topic::String, qos::aws_mqtt_qos, callback::OnMessage)
```

トピックフィルターにサブスクライブします（非同期）。クライアントはSUBSCRIBEパケットを送信し、サーバーはSUBACKで応答します。この関数はデバイスがオフラインのときに呼び出すことができますが、接続が再開されるまで非同期操作は正常に完了しません。サブスクライブが完了すると、`callback`は`topic`に一致するメッセージが受信されるたびに呼び出されます。このようなメッセージは、SUBACKが受信される前に到着する可能性があります。

引数:

  * `connection (MQTTConnection)`: 使用する接続。
  * `topic (String)`: ワイルドカードを含む可能性のあるこのトピックフィルターにサブスクライブします。
  * `qos (aws_mqtt_qos)`: サーバーがクライアントにメッセージを送信する際に使用する最大要求QoS。サーバーはSUBACKで低いQoSを付与する場合があります（返されたタスクを参照）。
  * `callback (OnMessage)`: メッセージが受信されたときに呼び出されるコールバック。必要なシグネチャについては[`OnMessage`](@ref)を参照してください。

タスクとSUBSCRIBEパケットのIDを返します。タスクはサーバーからSUBACKが受信されると完了します。

成功した場合、タスクには次のメンバーを持つ辞書が含まれます:

  * `:packet_id (Int)`: 確認されているSUBSCRIBEパケットのID。
  * `:topic (String)`: 確認されているSUBSCRIBEパケットのトピックフィルター。
  * `:qos (aws_mqtt_qos)`: サーバーによって付与された最大QoS。これは要求されたQoSよりも低い場合があります。

失敗した場合、タスクには例外が含まれます。

MQTT接続またはネットワーク接続がない場合、タスクは永遠に待機する可能性があります。

SUBSCRIBEパケットを送信できなかった場合は例外をスローします。

!!! note
    すべてのコールバックは同時に実行されます。コールバックの実装はスレッドセーフである必要があります。並行性の制限はありません。

