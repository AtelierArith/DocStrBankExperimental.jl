```
(new_trace, weight, retdiff) = regenerate(trace, args::Tuple, argdiffs::Tuple,
                                          selection::Selection)
```

引数を変更したり、内部提案分布ファミリーを使用して選択されたランダム選択肢の新しい値をランダムにサンプリングすることによって、トレースを更新します。

以前のトレース $(x, r, t)$ (`trace`)、新しい引数 $x'$ (`args`)、およびアドレスのセット $A$ (`selection`) が与えられたとき、すべてのアドレスが $A$ に含まれない限り $t$ と一致する新しいトレース $(x', t')$ (`new_trace`) を返します ($t$ と $t'$ は異なるアドレスのセットを持つ場合があります)。 $u$ を $t$ の $A$ の補集合への制限とします。 $t' \sim Q(\cdot; u, x')$ をサンプリングし、$r' \sim Q(\cdot; x', t')$ をサンプリングします。新しいトレース $(x', r', t')$ (`new_trace`) と重み (`weight`) を返します：

$$
\log \frac{p(r', t'; x')}{q(t'; u, x') q(r'; x', t')}
- \log \frac{p(r, t; x)}{q(t; u', x) q(r; x, t)}
$$

ここで、$u'$ は $t'$ の $A$ の補集合への制限です。

`argdiffs` は `args` と同じ長さであることが期待されます。`trace` を生成した関数が末尾の引数に対してデフォルト値をサポートしている場合、これらの引数は `args` および `argdiffs` から省略できます。元の `trace` が非デフォルトの引数値を使用して生成された場合、省略された各オプション引数について、古い値は再生成されたトレースのデフォルト引数値によって上書きされることに注意してください。
