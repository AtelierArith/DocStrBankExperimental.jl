```
localreduce(op, [T=eltype(A),] A, dims, rngs; kwds...) -> dst
```

は、`A`の値に対する結合的な二項演算子`op`による局所的な還元を、`A`の次元`dims`に沿った区間`rngs`によって定義された連続したハイパー長方形の近傍に行います。還元を計算するために、van Herk-Gil-Wermanのアルゴリズムが使用されます。

オプションの引数`T`は、結果の要素型を指定するためのものです。

引数`dims`は、`A`のどの次元に局所的な還元を適用するかを指定します。これは単一の整数、整数のタプル、またはすべての次元に操作を適用するためのコロン`:`であることができます。次元は、`dims`で指定された順序で処理され（同じ次元が複数回現れることもあります）、構造要素を指定するために`rngs`に一致する区間が必要です（ただし、`rngs`が単一の区間である場合、それは`dims`のすべての次元に使用されます）。区間は整数または`kmin:kmax`の形の整数値の単位範囲です。単一の整数として指定された区間は、この長さのほぼ中心にある範囲として扱われます。

キーワード`order`はフィルタの方向を指定し、デフォルトでは`FORWARD_FILTER`です。

キーワード`work`は、必要に応じて自動的にサイズ変更される型`Vector{T}`のワークスペース配列を提供するために使用できます。

一次元配列`A`を仮定すると、単一の還元パスは次のようになります：

```
dst = localreduce(op, A, :, rng)
```

これは（前方順序を仮定すると）次の計算に相当します：

```
dst[j] =  A[i+kmin] ⋄ A[i+kmin+1] ⋄ ... ⋄ A[i+kmax-1] ⋄ A[i+kmax]
```

すべての`j ∈ axes(dst,1)`について、`x ⋄ y = op(x, y)`、`kmin = first(rng)`および`kmax = last(rng)`です。`kmin = kmax = k`の場合、フィルタの結果は対応する次元に沿って`k`だけ単純にシフトすることになり、`k = 0`の場合は効果がありません。これを利用して、いくつかの次元をフィルタリングしないことができます。

上記の式における`A[i+k]`については、フラット境界条件が仮定されています。

## 例

配列`A`の*形態学的侵食*（局所最小値）は、すべての次元で幅7の中心構造要素を用いて次のように得られます：

```
localreduce(min, A, :, -3:3)
```

または同等に：

```
localreduce(min, A, :, 7)
```

インデックス区間`0:0`を指定することで、対応する次元に沿って何もしないことができます。例えば、`A`が三次元配列であると仮定すると：

```
localreduce(max, A, :, (-3:3, 0:0, -4:4))
```

は、中心の局所近傍での`A`の*形態学的膨張*（すなわち局所最大値）をサイズ`7×1×9`で生成します（第二次元に沿っては何も行われません）。同じ結果は次のように得られます：

```
localreduce(max, A, (1,3), (-3:3, -4:4))
```

ここでは、第二次元が次元のリストから省略されています。

二次元配列`A`の*局所平均*は、サイズ11×11の中心スライディングウィンドウで次のように計算できます：

```
localreduce(+, A, :, (-5:5, -5:5)) ./ 11^2
```

インプレースバージョンのメソッドについては[`localreduce!`](@ref)を参照してください。 ```
