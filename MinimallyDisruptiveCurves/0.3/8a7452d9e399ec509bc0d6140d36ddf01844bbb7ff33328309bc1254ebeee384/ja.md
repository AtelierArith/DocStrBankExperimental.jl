与えられたコスト関数 C(p) は、新しいコスト d::DiffCost を作成し、有限差分勾配を返すメソッドを持っています。
