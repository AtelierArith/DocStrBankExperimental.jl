## 名前付きセマフォ

```julia
Semaphore(name, value; perms=0o600, volatile=true) -> sem
```

は、`name`という文字列で識別される新しい名前付きセマフォを作成し、初期値を`value`に設定します。`Semaphore{String}`のインスタンスが返されます。キーワード`perms`はアクセス権限を指定するために使用できます。キーワード`volatile`は、返されたオブジェクトが最終化されたときにセマフォがリンク解除されるべきかどうかを指定します。

```julia
Semaphore(name) -> sem
```

は、既存の名前付きセマフォを開き、`Semaphore{String}`のインスタンスを返します。

永続的な名前付きセマフォをリンク解除（削除）するには、単に次のようにします：

```julia
rm(Semaphore, name)
```

セマフォが存在しない場合、エラーは無視されます。ただし、他のエラーについては`SystemError`がスローされます。

最大の柔軟性を持たせるために、名前付きセマフォのインスタンスは次のように作成することもできます：

```julia
open(Semaphore, name, flags, mode, value, volatile) -> sem
```

ここで、`flags`には`IPC.O_CREAT`および`IPC.O_EXCL`のビットが設定される可能性があり、`mode`は付与されたアクセス権限を指定し、`value`は初期セマフォ値、`volatile`は返されたオブジェクト`sem`が最終化されたときにセマフォがリンク解除されるべきかどうかを示すブール値です。既存の名前付きセマフォが開かれている場合、`mode`と`value`の値は無視されます。`mode`の権限設定はプロセスの`umask`に対してマスクされます。

## 匿名セマフォ

匿名セマフォは、必要なストレージを提供する*メモリ*オブジェクトによってバックアップされています。

```julia
Semaphore(mem, value; offset=0, volatile=true) -> sem
```

は、メモリオブジェクト`mem`によってバックアップされた匿名セマフォを初期値`value`で初期化し、`Semaphore{typeof(mem)}`のインスタンスを返します。キーワード`offset`は、セマフォデータのアドレス（バイト単位）を`pointer(mem)`に対して相対的に指定するために使用できます。キーワード`volatile`は、返されたオブジェクトが最終化されたときにセマフォが破棄されるべきかどうかを指定します。

```julia
Semaphore(mem; offset=0) -> sem
```

は、初期化された匿名セマフォに関連付けられ、メモリオブジェクト`mem`によってバックアップされた`Semaphore{typeof(mem)}`のインスタンスを返します。相対位置（バイト単位）はキーワード`offset`によって指定されます。

匿名セマフォを格納するために必要なバイト数は`sizeof(Semaphore)`によって与えられ、匿名セマフォはメモリ内でワードサイズの倍数（すなわち`Sys.WORD_SIZE >> 3`バイト）に整列されている必要があります。匿名セマフォを格納するために使用されるメモリオブジェクトは、関連するメモリのベースアドレスとサイズ（バイト単位）をそれぞれ返す`pointer(mem)`および`sizeof(mem)`の2つのメソッドを実装する必要があります。

参照： [`post`](@ref), [`wait`](@ref), [`timedwait`](@ref),           [`trywait`](@ref).
