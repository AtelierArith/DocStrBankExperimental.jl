```julia
drain(connection)

```

すべてのサブスクリプションの購読を解除し、バッファ内のすべてのメッセージの処理が完了するのを待ってから接続を閉じます。排水された接続はもはや使用できません。このメソッドはプロセスを優雅に停止するために使用されます。

その下では、すべてのバッファの状態を定期的にチェックします。チェックの間隔は、`connect`メソッドの`drain_poll`パラメータで接続ごとに設定可能です。また、`NATS_DRAIN_POLL_INTERVAL_SECONDS`環境変数でグローバルに設定することもできます。明示的に設定されていない場合、デフォルトのポーリング間隔は`0.2`秒です。

タイムアウトが切れるまでに排水が完了しない場合、エラーがログに書き込まれます。デフォルトのタイムアウト値は、`connect`の`drain_timeout`で接続ごとに設定可能です。また、`NATS_DRAIN_TIMEOUT_SECONDS`環境変数でグローバルに設定することもできます。明示的に設定されていない場合、デフォルトの排水タイムアウトは`5.0`秒です。
