```julia
drain(connection, sub; timer)

```

サブスクリプションの解除と、バッファ内のすべてのメッセージの処理が完了するまで待機します。

その下では、定期的にバッファの状態をチェックします。チェックの間隔は、`connect`メソッドの`drain_poll`パラメータで接続ごとに設定可能です。また、`NATS_DRAIN_POLL_INTERVAL_SECONDS`環境変数でグローバルに設定することもできます。明示的に設定されていない場合、デフォルトのポーリング間隔は`0.2`秒です。

オプションのキーワード引数：

  * `timer`: `timer`が期限切れになるまでにドレインが完了しない場合、エラーが発生します。デフォルト値は、`connect`の`drain_timeout`で接続ごとに設定可能です。また、`NATS_DRAIN_TIMEOUT_SECONDS`環境変数でグローバルに設定することもできます。明示的に設定されていない場合、デフォルトのドレインタイムアウトは`5.0`秒です。
