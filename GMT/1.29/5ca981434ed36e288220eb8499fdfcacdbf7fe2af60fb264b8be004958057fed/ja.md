```
ecmwf(; filename="", cb::Bool=false, dataset="", params::AbstractString="", key::String="",
      url::String="", region="", format="netcdf", dryrun::Bool=false, verbose::Bool=true)
```

この関数は、気候データストア（CDS）(https://cds.climate.copernicus.eu) サービスからデータを取得します。

  * `filename`: データを保存するファイルの名前。指定しない場合、関数はデータセットとデータ形式に基づいて名前を生成します。
  * `cb`: クリップボードの内容を使用するかどうかを示すブール値。trueの場合、関数は $clipboard()$ を使用してその内容を取得します。クリップボードには、CDSウェブサイトによって生成された有効なAPIリクエストコードが含まれている必要があります。このサイトでは、各データセットのダウンロードタブの下部に $Show API request$ ボタンがあります。それをクリックすると、ユーザーはControl-C（または $Copy$ ボタンをクリック）でリクエストコードをコピーし、クリップボードに貼り付けることができます。
  * `dataset`: 取得するデータセットの名前。このオプションは、`params` 引数に `dataset` オプションが提供されている場合、またはクリップボードコピーに含まれている場合（`cb` オプションがtrueに設定されている）にはスキップできます。
  * `params`: リクエストパラメータを含むJSON文字列。この文字列は、CDSAPIが期待する形式である必要があります。このオプションを介して入力を使用する場合、`dataset` オプションは必須です。勇気がある場合は、リクエストパラメータを自分で作成し、$era5vars()$ と $era5time()$ 関数の出力を持つ2要素の文字列ベクターとして渡すことができます。この場合、必要に応じて、`region` および `levlist` オプションを介して地域選択と圧力レベルを提供する必要があります。`region` オプションは、これを使用する他のすべてのGMT.jlモジュールで同じ構文を持っています。*例* $coast$ 関数。
  * `key`: CDSAPIサーバーのAPIキー。デフォルトはホームディレクトリの $.cdsapirc$ ファイルの値です。ただし、そのファイルが存在しない場合、ユーザーは `key` と `url` を引数として提供できます。ユーザーアカウントのための $.cdsapirc$ ファイルを作成する方法についての指示は、https://cds.climate.copernicus.eu/how-to-api で見つけることができます。
  * `url`: CDS APIサーバーのURL。デフォルトは https://cds.climate.copernicus.eu/api
  * `levlist`: 取得する圧力レベルのリスト。ユニークなレベルを選択するための文字列、または複数のレベルを選択するための文字列またはIntのベクターであることができます。ただし、レベルの範囲（例："1000:-100:500"）でも構いません。このオプションは、`params` 引数が文字列ベクターとして提供される場合にのみ使用されます。
  * `region`: 特定の地理的領域の地域を指定します。形式 "N/W/S/E" の文字列、または数値データを持つ4要素のベクターまたはタプルとして提供できます。このオプションは、`params` 引数が文字列ベクターとして提供される場合にのみ使用されます。
  * `format`: ダウンロードするデータの形式。デフォルトは "netcdf"。他のオプションは "grib" です。
  * `dryrun`: `era5vars()` および `era5time()` 関数の出力から `params` を印刷するかどうかを示すブール値。この場合、`params` を印刷し、ファイルのダウンロードを試みずに戻ります。
  * `verbose`: CDSサーバーへの接続の試行を印刷するかどうかを示すブール値。デフォルトはtrueです。

### クレジット

この関数は、部分的にCDSAPI.jlのビットに基づいていますが、そのパッケージの依存関係は必要ありません。

### 例

```julia
# 次のコードを選択してCtrl-Cを押してコピーします

{"product_type": ["reanalysis"],
    "variable": [
        "10m_u_component_of_wind",
        "10m_v_component_of_wind"
    ],
    "year": ["2024"],
    "month": ["12"],
    "day": ["06"],
    "time": ["16:00"],
    "data_format": "netcdf",
    "download_format": "unarchived",
    "area": [58, 6, 55, 9]
}

# さて、関数を呼び出しますが、警告：クリップボードの内容を置き換えるので、コピー＆ペーストしないでください
ecmwf(dataset="reanalysis-era5-single-levels", cb=true)
```

### 自分たちでリクエストを構築してみましょう

```julia
var = era5vars(["t2m", "skt"])			# "t2m" は2mの温度、"skt" は地表温度
datetime = era5time(hour=10:14);
ecmwf(dataset="reanalysis-era5-land", params=[var, datetime], region=(-10, 0, 30, 45))
```

---

```
ecmwf(:forecast; levlist="", kw...)
```

ECMWFから予測データセットをダウンロードします。

### Kwargs

  * `cube`: trueの場合[デフォルト]、圧力レベル変数をダウンロードする際、データを1層ごとのファイルではなくnetCDF 3Dキューブとして保存します（`cube=false`の場合）。
  * `date`: 選択する日付。ユニークな日付を選択するための文字列、$DateTime$ オブジェクト、またはIntであることができます。Intは今日から遡る日数です。Intが3より大きい場合、エラーが発生します。日付が文字列の場合、YYYYMMDDまたはYYYY-MM-DDの形式である必要があります。
  * `dryrun`: リクエストされたデータのURLを印刷し、何もダウンロードしようとせずに戻ります。
  * `filename`: データを保存するファイルの名前。指定しない場合、次の2つのオプションがあります：（1）関数は変数と日付に基づいて名前を生成します。（2）`prefix` オプションを使用してファイル名のプレフィックスを提供します。
  * `format`: ダウンロードしたデータを保存する形式。 "grib" または "netcdf" です。デフォルトは "netcdf" です。
  * `levlist`: 選択する圧力レベル。ユニークな圧力レベルを選択するための文字列、または複数の圧力レベルを選択するための文字列またはIntのベクターであることができます。
  * `model`: 選択するモデルの文字列。"ifs" または "aifs" のいずれか。デフォルトは "ifs" です。
  * `param, variable, var, vars`: 選択する変数。ユニークな変数を選択するための文字列、または複数の変数を選択するための文字列またはIntのベクターであることができます。変数がリクエストされると、それらの変数のみを別々のファイルとしてダウンロードします。それらのファイルの名前は、.grib2拡張子を持つ変数名と同じです。注意：変数を指定しないと、選択した各予測ステップの全予測gribファイルがダウンロードされます。
  * `prefix`: ファイル名に使用するプレフィックスの文字列。ファイル名はプレフィックスの後に変数名が続きます。
  * `root`: CDS ERA5データセットのルートURL。デフォルトは "https://data.ecmwf.int/forecasts" です。
  * `region`: 特定の地理的領域の地域を指定します。形式 "N/W/S/E" の文字列、または数値データを持つ4要素のベクターまたはタプル、またはすべてのearthregion名として提供できます。
  * `step`: 選択する予測ステップのInt。
  * `stream`: 選択するストリーム。次のいずれかである必要があります："oper", "enfo", "waef", "wave", "scda", "scwv", "mmsf"。デフォルトは "oper" です。
  * `time`: 選択する時間（時間単位）。文字列、$Time$ オブジェクト、またはIntであることができます。何であれ、0、6、12、または18に切り捨てられます。デフォルトは現在の時間です。
  * `stream`: 選択するストリームの文字列で、次のいずれかである必要があります："oper", "enfo", "waef", "wave", "scda", "scwv", "mmsf"。デフォルトは "oper" です。
  * `type`: 選択する予測のタイプの文字列で、次のいずれかである必要があります："fc", "ef", "ep", "tf"。デフォルトは "fc" です。

### 例

今日の最新の10m風と2m温度の予測を取得します。

```julia
ecmwf(:forecast, vars=["10u", "2t"])
```
