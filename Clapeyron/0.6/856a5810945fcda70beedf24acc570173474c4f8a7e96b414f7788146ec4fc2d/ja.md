```
volume(model::EoSModel, p, T, z=SA[1.0]; phase=:unknown, threaded=true, vol0=nothing)
```

`model`によってモデル化された化合物の体積(m³)を、特定の圧力、温度、モル数で計算します。`phase`は、探す初期体積のルートを決定するシンボルです：

  * `phase =:unknown`（デフォルト）の場合、ギブズエネルギーが最も少ない物理的に正しい体積のルートを返します。
  * `phase =:liquid`の場合、液体の初期点を使用して相の体積を返します。
  * `phase =:vapor`の場合、気体の初期点を使用して相の体積を返します。
  * `phase =:solid`の場合、固体の初期点を使用して相の体積を返します（固体相をサポートするEoSのみ対応）。
  * `phase =:stable`の場合、ギブズエネルギーが最も少ない物理的に正しい体積のルートを返し、結果に対して安定性テストを実施します。

すべての体積計算は機械的安定性が確認されます。つまり：`dP/dV <= 0`です。

両方の体積ルートの計算は、直列（`threaded=false`）または並列（`threaded=true`）で計算できます。

初期の体積の推定値`vol0`をオプションで提供できます。

!!! tip
    体積計算は失敗し、`NaN`を返すことがあります。これは、デフォルトの初期点が実際の体積から遠すぎるためです。`vol0`の値を提供することで、これらの状況で助けになる場合があります。そのような出発点は、物理的知識から見つけることができるか、別のモデルを使用して体積を計算することで見つけることができます。


!!! warning "安定性チェック"
    安定性チェックはデフォルトで無効です。つまり、得られた体積は単に`P = pressure(model,V,T,z)`の関係に従います。単一成分モデルの場合、これは問題ありませんが、相分割（入力とは異なる組成を持つ）が発生する可能性があり、体積解が既存の相に対応しないことがあります。未知の多成分混合物の場合、相平衡手続きを使用して（`tp_flash`のように）有効な組成のリストを取得し、その組成に対して体積計算を行うことをお勧めします。また、体積ソルバー内で安定性テストを実施するために`phase=:stable`を渡すこともできます。最後に、体積ソルバーの後に安定性テストを実施することもできます：

    ```julia
    v = volume(model,p,T,z)
    isstable(model,v,T,z)
    ```

