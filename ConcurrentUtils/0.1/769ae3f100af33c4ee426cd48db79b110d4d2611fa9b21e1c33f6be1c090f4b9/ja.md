```
Once{T}(f = T)
Once(f)
```

型 `T` のオブジェクトを遅延初期化するための並行オブジェクトです。

`O = Once{T}(f)` の場合、`O[]` を呼び出すと、`f` が `O[]` を介して呼び出されていない場合は `v = f()` が評価され、値 `v` が返されます。そうでない場合、`O[]` は最初の `O[]` の呼び出しから返された値 `v` を返します。

# 例

```jldoctest Once
julia> using ConcurrentUtils

julia> O = Once{Vector{Int}}(() -> zeros(Int, 3));

julia> v = O[]
3-element Vector{Int64}:
 0
 0
 0

julia> v === O[]
true
```

# 拡張ヘルプ

`Once{T}(f)` のように使用される場合、関数 `f` は常に型 `T` の値を返さなければなりません。そのため、`Once{T}()` のように使用される型 `T` に対して `T() isa T` が成り立つ必要があります。

`Once(f)` のように使用される場合、関数 `f` は常に具体的な一貫した型の値を返さなければなりません。`Once` オブジェクトがパッケージ内のグローバル定数として使用される場合、`f` から返される値の型は、各 Julia 環境のスタックに対して異なる `julia` プロセスで変わってはいけません。現在、`Once(f)` は結果の型を計算するために `f()` を直接呼び出しますが、この値は破棄されます。これは、`Once(f)` がグローバル状態を遅延初期化するためにパッケージのトップレベルで呼び出されると想定されており、計算された値をプリコンパイルキャッシュにシリアライズすることは望ましくないためです。

既知の制限: プリコンパイル中にグローバル `O::Once{T}` に対して `O[]` が評価されると、結果の値はプリコンパイルキャッシュにシリアライズされます。 ```
