This function adds the following helpers variables

  * reduction_matrix - a reduction matrix to project down to the component graph
  * transitive_order - a transitive ordering of the components
  * transitive_map - a map to components that respects the transitive ordering
  * largest
