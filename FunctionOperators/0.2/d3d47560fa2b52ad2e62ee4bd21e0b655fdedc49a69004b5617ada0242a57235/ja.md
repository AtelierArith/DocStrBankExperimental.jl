åå¾©å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚’ã€é€”ä¸­çµæœã®ãŸã‚ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸé…åˆ—ã‚’ä¿æŒã—ã€ãã‚Œã‚’æ¬¡ã®åå¾©ã§å†åˆ©ç”¨ã™ã‚‹ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›ã™ã‚‹ã“ã¨ã§ã€è¡Œåˆ—æ“ä½œãŒå¤šã„å ´åˆã«é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

**æœ€åˆã®ãƒãƒªã‚¢ãƒ³ãƒˆ**:

```julia
@recycle <æœ€é©åŒ–ã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰>
```

**2ç•ªç›®ã®ãƒãƒªã‚¢ãƒ³ãƒˆ**:

```julia
@recycle(arrays = [<é…åˆ—å¤‰æ•°ã®ãƒªã‚¹ãƒˆ>], funops = [<FunOpå¤‰æ•°ã®ãƒªã‚¹ãƒˆ>], numbers = [<æ•°å€¤å¤‰æ•°ã®ãƒªã‚¹ãƒˆ>], <æœ€é©åŒ–ã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰>)
```

**æœ€åˆã®ãƒãƒªã‚¢ãƒ³ãƒˆ**ã¯ã€å¤‰æ•°ã®å‹ã‚’æ¨æ¸¬ã—ã‚ˆã†ã¨ã™ã‚‹ãŸã‚ã€ã‚ˆã‚Šä¾¿åˆ©ã§ã™ï¼ˆä»–ã®ãƒãƒªã‚¢ãƒ³ãƒˆã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«Arrayã€FunOpã€ãŠã‚ˆã³Numberã®å‹ã®å¤‰æ•°ã®ãƒªã‚¹ãƒˆã‚’å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰ã€‚ãã®ä»£å„Ÿã¨ã—ã¦ã€ã“ã®ãƒãƒªã‚¢ãƒ³ãƒˆã¯ã€æœ€é©åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã«ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã¾ãŸã¯éå®šæ•°ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã«å¤±æ•—ã—ã¾ã™ã€‚

**2ç•ªç›®ã®ãƒãƒªã‚¢ãƒ³ãƒˆ**ã¯ã€ã‚ˆã‚ŠæŸ”è»Ÿï¼ˆã‹ã¤å†—é•·ï¼‰ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«Arrayã€FunOpã€ãŠã‚ˆã³Numberã®å‹ã®å¤‰æ•°ã®ãƒªã‚¹ãƒˆã‚’å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»–ã®ãƒãƒªã‚¢ãƒ³ãƒˆã¯å¤‰æ•°ã®å‹ã‚’æ¨æ¸¬ã—ã‚ˆã†ã¨ã™ã‚‹ãŸã‚ã€ã‚ˆã‚Šä¾¿åˆ©ã§ã™ãŒã€ãã®ä»£å„Ÿã¨ã—ã¦ã€æœ€é©åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã«ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã¾ãŸã¯éå®šæ•°ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã«å¤±æ•—ã—ã¾ã™ã€‚ä¸€æ–¹ã§ã€ã“ã®ï¼ˆã‚ˆã‚Šå†—é•·ãªï¼‰ãƒãƒªã‚¢ãƒ³ãƒˆã¯ã“ã‚Œã‚‰ã®åˆ¶é™ã‹ã‚‰è‡ªç”±ã§ã™ã€‚*æ³¨ï¼šã™ã¹ã¦ã®ã€Œã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã€ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚Šã€ãã®é †åºã‚‚ä»»æ„ã§ã™ã€‚*

æœ€åˆã®ãƒãƒªã‚¢ãƒ³ãƒˆã®ä¾‹ï¼šã“ã®é–¢æ•°

```julia
function foo()
    A = rand(100,100)
    B = rand(100,100)
    @recycle for i = 1:5
        A += A / 2 + B
        C = A * B + 5
    end
end
```

ã¯æ¬¡ã®ã‚ˆã†ã«å¤‰æ›ã•ã‚Œã¾ã™ï¼š

```julia
function foo()
    A = rand(100,100)
    B = rand(100,100)
    (C, ğŸ”ƒâ‚‚) = fill(nothing, 2)
    (is_first_runâ‚,) = fill(true, 1)
    for i = 1:5
        A .+= A ./ 2 .+ B
        if is_first_runâ‚
            is_first_runâ‚ = false
            ğŸ”ƒâ‚‚ = A * B
            C = ğŸ”ƒâ‚‚ .+ 5
        else
            mul!(ğŸ”ƒâ‚‚, A, B)
            C .= ğŸ”ƒâ‚‚ .+ 5
        end
    end
end
```

2ç•ªç›®ã®ãƒãƒªã‚¢ãƒ³ãƒˆãŒã§ãã‚‹ã“ã¨ã‚’ç¤ºã™åˆ¥ã®ä¾‹ï¼ˆæœ€åˆã®ãƒãƒªã‚¢ãƒ³ãƒˆã§ã¯ã§ããªã„ï¼‰ï¼š

```julia
bar = @recycle(arrays=[A,B], (A, B) -> begin
    A += A / 2 + B
    B = A * B .+ 5
end)
function baz()
    A = rand(100,100)
    B = rand(100,100)
    for i = 1:5
        bar(A,B)
    end
end
```

ã¯æ¬¡ã®ã‚ˆã†ã«å¤‰æ›ã•ã‚Œã¾ã™ï¼š

```julia
bar = begin
    (ğŸ”ƒâ‚,) = fill(nothing, 1)
    (is_first_runâ‚,) = fill(true, 1)
    (A, B)->begin
            A .+= A ./ 2 .+ B
            begin
                if is_first_runâ‚
                    is_first_runâ‚ = false
                    ğŸ”ƒâ‚ = A * B
                else
                    mul!(ğŸ”ƒâ‚, A, B)
                end
                B .= ğŸ”ƒâ‚ .+ 5
            end
        end
end
function baz()
    A = rand(100,100)
    B = rand(100,100)
    for i = 1:5
        bar(A,B)
    end
end
```
