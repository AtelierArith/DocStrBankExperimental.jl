```
new_mags [, good_idxs] = model_cmd(mags::AbstractVector{<:AbstractVector{<:Number}}, errfuncs, completefuncs; rng::Random.AbstractRNG=Random.default_rng(), ret_idxs::Bool=false)
```

光度誤差と不完全性をモデル化するための簡単なメソッドで、[`generate_stars_mass`](@ref)や[`generate_stars_mag`](@ref)によって生成された純粋な星の光度カタログを「模擬観測」するためのものです。このメソッドは、ガウス光度誤差を仮定し、光度誤差と完全性関数がフィルターによって分離可能であると仮定します。

# 引数

  * `mags::AbstractVector{<:AbstractVector{<:Number}}`: モデル化される各星の光度を与えるベクトルのベクトル。最初のインデックスは星ごとのインデックスで、2番目のインデックスはフィルターごとのインデックスです（したがって、`mags[10][2]`は2番目のフィルターにおける10番目の星の光度を返します）。これは、[`generate_stars_mass`](@ref)および[`generate_stars_mag`](@ref)によって返される光度と同じ形式です。合成バージョンの出力を使用するには、最初に`reduce(vcat,mags)`を実行してからこの関数に渡す必要があります。
  * `errfuncs`: `mags`の要素に含まれるフィルターの数と同じ長さの呼び出し可能なオブジェクト（通常はベクトルまたはタプル）です。このイテラブルには、`mags`から関連する光度を使って呼び出すと、その光度での期待される1-σ光度誤差を返す呼び出し可能なオブジェクトが含まれている必要があります。構成は、バンド`j`における星`i`の光度誤差が`σ_ij = errfuncs[j](mags[i][j])`であるようになっています。
  * `completefuncs`: `mags`の要素に含まれるフィルターの数と同じ長さの呼び出し可能なオブジェクト（通常はベクトルまたはタプル）です。このイテラブルには、`mags`から関連する光度を使って呼び出すと、そのバンドでその光度を持つ星があなたの色-光度図に見つかる確率を返す呼び出し可能なオブジェクトが含まれている必要があります（これには元の検出確率と、検出後の品質、形態、またはその他のカットが含まれるべきです）。構成は、バンド`j`における星`i`の検出確率が`c_ij = completefuncs[j](mags[i][j])`であるようになっています。

# キーワード引数

  * `rng::AbstractRNG=Random.default_rng()`: ランダム数生成に使用するオブジェクト。
  * `ret_idxs::Bool`: 成功裏に「観測」された星の入力`mags`のインデックスを出力`new_mags`に返すかどうか。

# 戻り値

  * `new_mags`: 模擬観測された星の光度を含む、`mags`に似たオブジェクト（すなわち、`Vector{Vector{<:Number}}`、`Vector{SVector{N,<:Number}}`など）。これは光度の不完全性をモデル化しているため、提供された`mags`ベクトルよりも短くなり、光度にはランダムな光度誤差も加えられます。これは`reduce(hcat,new_mags)`として2次元の`Matrix`として再解釈できます。
  * `good_idxs`: `ret_idxs`が`true`の場合、成功裏に「観測」された星の入力`mags`へのインデックスのベクトル。

# 注意事項

  * これは、[`generate_stars_mass`](@ref)や[`generate_stars_mag`](@ref)のような「純粋な」星のカタログを観測効果を含めるために後処理する方法の簡単な例を示すことを目的としたシンプルな実装です。このメソッドは、一般的には正確でない可能性のあるガウス光度誤差を仮定しています。また、総検出確率は`completefuncs`によって計算された単一フィルターの検出確率の積としてモデル化できると仮定しています（すなわち、完全性関数がフィルター間で分離可能であると仮定しています）。これは、各フィルターに対して別々に導出された光度カタログを持ち、それを後で集約する場合には合理的な仮定ですが、同時にマルチバンド光度で動作する検出アルゴリズムには一般的に良い仮定ではありません - これらのタイプのアルゴリズムの完全性関数は一般的に分離可能ではありません。
