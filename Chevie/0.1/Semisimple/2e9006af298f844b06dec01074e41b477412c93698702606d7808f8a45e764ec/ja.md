一般化カータン行列 `C` は、サイズ `n` の正方整数行列であり、`cᵢᵢ=2`、`cᵢⱼ≤0` もし `i≠j` の場合、かつ `cᵢⱼ==0` であるのは `cⱼᵢ==0` の場合に限ると定義されます。`C` が *非分解可能* であるとは、ブロック分解を許さないことを意味します。

`C` を一般化カータン行列とします。`I` を `{1,…,n}` の部分集合とすると、`C_I` はインデックス `i,j` が `I` から取られる正方部分行列を表します。もし `v` が長さ `n` の実ベクトルであれば、すべての `i∈ {1,…,n}` に対して `vᵢ>0` であるとき、`v>0` と書きます。`C` がカータン行列であるための必要十分条件は、すべての集合 `I` に対して `det C_I>0` であること、または同値に、`v>0` が存在して `C.v>0` であることが示されます。`C` は *アフィンカータン行列* と呼ばれ、すべての適切な部分集合 `I` に対して `det C_I>0` であるが、`det C==0` である場合、または同値に、`v>0` が存在して `C.v==0` である場合です。

不可約なワイル群 `W` とカータン行列 `C` が与えられたとき、次のように一般化カータン行列 `C̃` を構築できます。`α₀` を最も高い根の反対とします。すると、行列 $\left(\begin{array}{cc}C&C.α₀\\  α₀.C&2\end{array}\right)$ はアフィンカータン行列です。この方法で得られるアフィンカータン行列が私たちが興味を持つものであり、アフィンワイル群を生じさせます。

`d=n-rank(C)` とします。一般化カータン行列の *実現* は、次元 `n+d` のベクトル空間 `V,Vᵛ` のペアであり、ベクトル `α₁,…,αₙ∈ V` （*単純根*）、`αᵛ₁,…,αᵛₙ∈ Vᵛ` （*単純コルート*）が存在し、`(αᵛᵢ,  αⱼ)=c_{i,j}` となるものです。同型に関して、実現は次のように得られます：$C=\left(\begin{array}{c}C_1\\C_2\end{array}\right)$ と書き、`C₁` は `C` と同じランクを持ちます。次に、`αᵢ` を `V` の基底の最初の `n` ベクトルとし、`αᵛⱼ` を行列 $\left(\begin{array}{cc}C₁&0\\ C_2&\hbox{Id}_d\\ \end{array}\right)$ の行によって双対基底で与えます。`C` に対して、空間 `V` における反射群を関連付け、*基本反射* `rᵢ` によって生成されます。これはコクセター群であり、アフィンカータン行列から始めると、`W` に関連する *アフィンワイル群* `ilde W` と呼ばれます。

アフィンワイル群は無限であり、`W` と比較して `α₀` に関する反射を持つ追加の生成子 `s₀` があります。コクセター群の生成子のラベルとしてデフォルトで `0` を使用することはできません（デフォルトのラベルはインデックスとして使用され、インデックスはJuliaでは1から始まるため）ので、`W` の生成子の数 `n` に基づいて `n+1` とラベル付けします。

```julia-repl
julia> W=affine(coxgroup(:A,4))
Ã₄

julia> diagram(W)
       ————5————
      /         \
Ã₄   1———2———3———4
```
