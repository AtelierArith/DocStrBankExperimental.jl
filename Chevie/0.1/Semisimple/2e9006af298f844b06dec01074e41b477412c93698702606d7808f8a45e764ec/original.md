A  *generalized Cartan matrix* `C`  is a square integer  matrix of size `n` such  that `cᵢᵢ=2`, `cᵢⱼ≤0` if `i≠j`, and `cᵢⱼ==0` if and only if `cⱼᵢ==0`. We  say  that  `C`  is  *indecomposable*  if  it  does  not admit any block decomposition.

Let  `C` be a generalized  Cartan matrix. For `I`  a subset of `{1,…,n}` we denote  by `C_I` the square  submatrix with indices `i,j`  taken in `I`. If `v`  is a real vector of length `n`, we write `v>0` if for all `i∈ {1,…,n}` we  have `vᵢ>0`. It can be shown that `C` is a Cartan matrix if and only if for  all sets  `I`, we  have `det  C_I>0`; or  equivalently, if and only if there  exists  `v>0`  such  that  `C.v>0`.  `C` is called an *affine Cartan matrix*  if for all proper subsets `I` we have `det C_I>0`, but `det C==0`; or equivalently if there exists `v>0` such that `C.v==0`.

Given  an  irreducible  Weyl  group  `W`  with  Cartan  matrix  `C`, we can construct  a generalized  Cartan matrix  `C̃` as  follows. Let  `α₀` be the opposed of the highest root. Then the matrix $\left(\begin{array}{cc}C&C.α₀\\  α₀.C&2\end{array}\right)$ is  an  affine  Cartan  matrix.  The  affine  Cartan  matrices which can be obtained  in this way  are those we  are interested in,  which give rise to affine Weyl groups.

Let `d=n-rank(C)`. A *realization* of a generalized Cartan matrix is a pair `V,Vᵛ`  of vector spaces of dimension `n+d` together with vectors `α₁,…,αₙ∈ V`  (the *simple roots*), `αᵛ₁,…,αᵛₙ∈ Vᵛ` (the *simple coroots*), such that `(αᵛᵢ,  αⱼ)=c_{i,j}`.  Up  to  isomorphism,  a  realization  is obtained as follows: write $C=\left(\begin{array}{c}C_1\\C_2\end{array}\right)$ where  `C₁` is  of same  rank as  `C`. Then  take `αᵢ`  to be the first `n` vectors  in a basis of `V`, and take `αᵛⱼ` to be given in the dual basis by the rows of the matrix $\left(\begin{array}{cc}C₁&0\\ C_2&\hbox{Id}_d\\ \end{array}\right).$ To  `C` we associate a reflection group  in the space `V`, generated by the *fundamental  reflections*  `rᵢ`  given  by  `rᵢ(v)=v-(αᵛᵢ,v)αᵢ`. This is a Coxeter  group, called the *affine Weyl group* `ilde W` associated to `W` when we start with the affine Cartan matrix associated to a Weyl group `W`.

The  affine Weyl  group is  infinite; it  has one additional generator `s₀` (the  reflection with respect to `α₀`) compared  to `W`. We can not use `0` as  a label  by default  for a  generator of  a Coxeter  group (because the default  labels are used as indices, and indices start at 1 in Julia) so we label it as `n+1` where `n` is the numbers of generators of `W`.

```julia-repl
julia> W=affine(coxgroup(:A,4))
Ã₄

julia> diagram(W)
       ————5————
      /         \
Ã₄   1———2———3———4
```
