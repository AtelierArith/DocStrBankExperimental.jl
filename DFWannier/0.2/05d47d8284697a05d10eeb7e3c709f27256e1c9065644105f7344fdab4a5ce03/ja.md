```
calc_exchanges(hamiltonian::TBHamiltonian, atoms::Vector{<:Atom}, fermi, exchange_type; kwargs...)
```

`atoms`間の磁気交換パラメータを計算します。`exchange_type`は[`Exchange2ndOrder`](@ref)または[`Exchange4thOrder`](@ref)のいずれかです。`kwargs`は計算のためのさまざまな数値パラメータを制御します：

  * `nk = (10,10,10)`: 一様補間グリッドに使用される*k*-点の数。
  * `R = (0,0,0)`: 交換パラメータが計算される単位格子のインデックス。
  * `ωh = -30.0`: エネルギー積分の下限。
  * `ωv = 0.15`: グリーン関数を積分するための複素空間における輪郭の高さ。
  * `n_ωh = 3000`: 水平方向の輪郭方向に沿った積分点の数。
  * `n_ωv = 500`: 垂直方向の輪郭方向に沿った積分点の数。
  * `site_diagonal = false`: `true`の場合、ハミルトニアンと`Δ`はオンサイトで対角化され、返される交換行列は明確に定義された軌道間の交換を保持します。これが行われない場合、交換行列のエントリはそれ自体では意味を持たず、サイト`i`と`j`のスピン間の交換を見つけるためにトレースを実行する必要があります。
