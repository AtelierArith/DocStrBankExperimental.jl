```
CompositeDownsampling <: MultiScaleAlgorithm
CompositeDownsampling(; f::Function = Statistics.mean, scales = 1:8)
```

マルチスケールエントロピー分析のための複合マルチスケールアルゴリズム [Wu2013](@cite) で、例えば複合マルチスケールエントロピー (CMSE) を計算するために [`multiscale`](@ref) と共に使用されます。

## 説明

スカラー値の入力時系列 `x` が与えられたとき、複合マルチスケールアルゴリズムは、[`RegularDownsampling`](@ref) のように、`x` を長さ `s` の非重複ウィンドウに分割し、各長さ `s` のウィンドウに関数 `f` を適用することによってダウンサンプリングされた時系列を構築します。

しかし、[Wu2013](@citet) は、各スケール `s` に対して、インデックスの開始/終了位置に応じてウィンドウを選択する方法が実際に `s` 通りあることを認識しました。各スケール `s` におけるこれら `s` 通りのダウンサンプリングされた時系列 `D_t(s, f)` は次のように構築されます：

$$
\{ D_{k}(s) \} = \{ D_{t, k}(s) \}_{t = 1}^{L}, = \{ f \left( \bf x_{t, k} \right) \} =
\left\{
    {f\left( (x_i)_{i = (t - 1)s + k}^{ts + k - 1} \right)}
\right\}_{t = 1}^{L},
$$

ここで `L = floor((N - s + 1) / s)` であり、`1 ≤ k ≤ s` です。したがって、$D_{i, k}(s)$ はスケール `s` における `k` 番目のダウンサンプリングされた時系列の `i` 番目の要素です。

最後に、$\dfrac{1}{s} \sum_{k = 1}^s g(D_{k}(s))$ を計算します。ここで `g` は、例えば [`information`](@ref) や [`complexity`](@ref) のような要約関数です。

## キーワード引数

  * **`scales`**. ダウンサンプリングレベル。`scales` が整数に設定されている場合、この整数は最大スケール数（すなわちダウンサンプリングのレベル）として扱われ、ダウンサンプリングはレベル `1:scales` に対して行われます。そうでない場合、提供された `scales` に対してダウンサンプリングが行われます（範囲であったり、特定のスケール（例：`scales = [1, 5, 6]`）であったりします）。最大スケールレベルは `length(x) ÷ 2` ですが、非常に短い時系列にこのメソッドを適用するのを避けるために、最大スケールを制限することを検討してください（例：`scales = length(x) ÷ 5`）。

!!! note "RegularDownsampling との関係"
    複合マルチスケール法を使用して構築されたダウンサンプリングされた時系列 $D_{t, 1}(s)$ は、[`RegularDownsampling`](@ref) メソッドを使用して構築されたダウンサンプリングされた時系列 $D_{t}(s)$ と等価であり、ここで `k == 1` が固定されているため、単一の時系列のみが返されます。


参照： [`RegularDownsampling`](@ref).
