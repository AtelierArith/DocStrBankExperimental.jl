```
sv_ecef_to_eci(sv::OrbitStateVector, ECEF, ECI[, jd_utc][, eop]) -> OrbitStateVector
```

地球中心、地球固定（`ECEF`）参照フレームから地球中心慣性（`ECI`）参照フレームへの軌道状態ベクトル `sv` を、ユリウス日 `jd_utc` [UTC] で変換します。エポック `jd_utc` が提供されていない場合、アルゴリズムは軌道状態ベクトル `sv` のエポック（`sv.t`）を使用します。アルゴリズムは、ソースおよび宛先フレームに応じて、地球の姿勢パラメータ（EOP） `eop` を必要とする場合があります。

入力の速度と加速度は `sv` において ECEF フレームの観測者によって取得されていると仮定されます。したがって、出力には ECI フレームの観測者によって測定された速度と加速度が含まれます。

!!! note
    原点と宛先の参照フレームを指定する方法を含む詳細については、**拡張ヘルプ**を参照してください。


# 戻り値

  * `OrbitStateVector`: `ECI` 参照フレームに変換された軌道状態ベクトル `sv`。

# 拡張ヘルプ

## 変換モデル

回転を計算するために使用されるモデルは、原点と宛先フレームの選択に基づいて自動的に推測されます。**IAU-76/FK5 と IAU-2006/2010 フレームを混合することはサポートされていないことに注意してください。**

## サポートされている ECEF 参照フレーム

ECEF フレームは、パラメータ `ECEF` によって選択されます。可能な値は次のとおりです。

  * `ITRF()`: ECEF は国際地球参照フレーム（ITRF）として選択されます。
  * `PEF()`: ECEF は擬似地球固定（PEF）参照フレームとして選択されます。
  * `TIRS()`: ECEF は地球中間参照システム（TIRS）として選択されます。

## サポートされている ECI 参照フレーム

ECI フレームは、パラメータ `ECI` によって選択されます。可能な値は次のとおりです。

  * `TEME()`: ECI は真の赤道平均春分点（TEME）参照フレームとして選択されます。
  * `TOD()`: ECI は真の日時（TOD）として選択されます。
  * `MOD()`: ECI は平均日時（MOD）として選択されます。
  * `J2000()`: ECI は J2000 参照フレームとして選択されます。
  * `GCRF()`: ECI は地心天体参照フレーム（GCRF）として選択されます。
  * `CIRS()`: ECI は天体中間参照システム（CIRS）として選択されます。
  * `ERS()`: ECI は地球参照システム（ERS）として選択されます。
  * `MOD06()`: ECI は IAU-2006/2010 理論の定義に従った平均日時（MOD）として選択されます。
  * `MJ2000()`: ECI は J2000 平均赤道フレーム（MJ2000）として選択されます。

!!! note
    フレーム `MOD()` と `MOD06()` は実質的に同じです。ただし、IAU-76/FK5 と IAU-2006/2010 のフレーム間の変換を混合する際には注意が必要であるため、どの理論が使用されているかを明確にするために異なる名前を選択しました。


# 地球の姿勢パラメータ（EOP）

フレーム間の変換は EOP に依存する場合があります（[`fetch_iers_eop`](@ref) および [`read_iers_eop`](@ref) を参照）。IAU-76/FK5 モデルが使用される場合、`eop` の型は [`EopIau1980`](@ref) でなければなりません。そうでない場合、IAU-2006/2010 モデルが使用される場合、`eop` の型は [`EopIau2000A`](@ref) でなければなりません。以下の表は、選択されたフレームに応じた EOP データの要件を示しています。

| モデル                  | ECEF   | ECI      | EOP データ      |
|:-------------------- |:------ |:-------- |:------------ |
| IAU-76/FK5           | `ITRF` | `GCRF`   | EOP IAU1980  |
| IAU-76/FK5           | `ITRF` | `J2000`  | EOP IAU1980  |
| IAU-76/FK5           | `ITRF` | `MOD`    | EOP IAU1980  |
| IAU-76/FK5           | `ITRF` | `TOD`    | EOP IAU1980  |
| IAU-76/FK5           | `ITRF` | `TEME`   | EOP IAU1980  |
| IAU-76/FK5           | `PEF`  | `GCRF`   | EOP IAU1980  |
| IAU-76/FK5           | `PEF`  | `J2000`  | 不要¹          |
| IAU-76/FK5           | `PEF`  | `MOD`    | 不要¹          |
| IAU-76/FK5           | `PEF`  | `TOD`    | 不要¹          |
| IAU-76/FK5           | `PEF`  | `TEME`   | 不要¹          |
| IAU-2006/2010 CIOベース | `ITRF` | `CIRS`   | EOP IAU2000A |
| IAU-2006/2010 CIOベース | `ITRF` | `GCRF`   | EOP IAU2000A |
| IAU-2006/2010 CIOベース | `TIRS` | `CIRS`   | 不要¹          |
| IAU-2006/2010 CIOベース | `TIRS` | `GCRF`   | 不要¹ ²        |
| IAU-2006/2010 春分点ベース | `ITRF` | `ERS`    | EOP IAU2000A |
| IAU-2006/2010 春分点ベース | `ITRF` | `MOD06`  | EOP IAU2000A |
| IAU-2006/2010 春分点ベース | `ITRF` | `MJ2000` | EOP IAU2000A |
| IAU-2006/2010 春分点ベース | `TIRS` | `ERS`    | 不要¹ ³        |
| IAU-2006/2010 春分点ベース | `TIRS` | `MOD06`  | 不要¹ ³        |
| IAU-2006/2010 春分点ベース | `TIRS` | `MJ2000` | 不要¹ ³        |

`¹`: この場合、UTC はグリニッジ平均恒星時を計算するために UT1 と等しいと仮定されます。これは近似ですが、一部のアプリケーションには十分に正確であるはずです。EOP データが提供される場合、UT1 は正確に計算されます。

`²`: この場合、自由コア揺動および地心天体参照フレームに対する天体中間極（CIP）位置の時間依存効果を考慮する項は利用できず、精度が低下します。

`³`: この場合、自由コア揺動による傾斜および経度の揺動を修正する項は利用できず、精度が低下します。

!!! info
    この関数では、EOP 補正が提供されていない場合、MOD および TOD フレームは元の IAU-76/FK5 理論を考慮して計算されます。そうでない場合、補正されたフレームが使用されます。


# 例

```julia-repl
julia> eop_iau1980 = fetch_iers_eop(Val(:IAU1980));

julia> jd_utc = date_to_jd(2004, 4, 6, 7, 51, 28.386009);

julia> r_itrf  = [-1033.4793830; 7901.2952754; 6380.3565958] * 1000;

julia> v_itrf  = [-3.225636520; -2.872451450; +5.531924446] * 1000;

julia> sv_itrf = OrbitStateVector(jd_utc, r_itrf, v_itrf)
OrbitStateVector{Float64, Float64}:
  epoch : 2.4531e6 (2004-04-06T07:51:28.386)
      r : [-1033.48, 7901.3, 6380.36]    km
      v : [-3.22564, -2.87245, 5.53192]  km/s

julia> sv_gcrf = sv_ecef_to_eci(sv_itrf, ITRF(), GCRF(), eop_iau1980)
OrbitStateVector{Float64, Float64}:
  epoch : 2.4531e6 (2004-04-06T07:51:28.386)
      r : [5102.51, 6123.01, 6378.14]    km
      v : [-4.74322, 0.790537, 5.53376]  km/s

julia> eop_iau2000a = fetch_iers_eop(Val(:IAU2000A));

julia> sv_cirs = sv_ecef_to_eci(sv_itrf, ITRF(), CIRS(), eop_iau2000a)
OrbitStateVector{Float64, Float64}:
  epoch : 2.4531e6 (2004-04-06T07:51:28.386)
      r : [5100.02, 6122.79, 6380.34]    km
      v : [-4.74538, 0.790342, 5.53193]  km/s
```
