```
r_eci_to_eci([T, ]ECIo, ECIf, jd_utc::Number[, eop]) -> T
r_eci_to_eci([T, ]ECIo, jd_utco::Number, ECIf, jd_utcf::Number[, eop]) -> T
```

地球中心慣性 (ECI) 参照フレーム `ECIo` から別の ECI 参照フレーム `ECIf` への回転を計算します。起点と目的地のフレームが *of date* フレームのいずれか一つだけを含む場合、最初のシグネチャが使用され、ユリウス日 `jd_utc` [UTC] がこのフレームのエポックとなります。一方、起点と目的地のフレームが二つの *of date* フレーム`¹`を含む場合、例えば TOD => MOD の場合、二番目のシグネチャを使用し、ユリウス日 `jd_utco` [UTC] が起点フレームのエポック、ユリウス日 `jd_utcf` [UTC] が目的地フレームのエポックとなります。使用される回転の記述は `T` によって与えられ、`DCM` または `Quaternion` である可能性があります。アルゴリズムは、ソースと目的地のフレームに応じて地球の回転パラメータ (EOP) `eop` を必要とする場合もあります。

!!! note
    起点と目的地の参照フレームを指定する方法を含む詳細については、**拡張ヘルプ**を参照してください。


`¹`: TEME は *of date* フレームです。

# 戻り値

  * `T`: 起点 ECI 参照フレームを目的地 ECI 参照フレームに整列させる回転。

# 拡張ヘルプ

## 回転の記述

回転は方向余弦行列 (DCM) またはクォータニオンで記述できます。これはパラメータ `T` によって選択されます。

可能な値は次のとおりです。

  * `DCM`: 回転は方向余弦行列によって記述されます。
  * `Quaternion`: 回転はクォータニオンによって記述されます。

値が指定されていない場合、`DCM` にフォールバックします。

## 変換モデル

回転を計算するために使用されるモデルは、起点と目的地のフレームの選択に基づいて自動的に推測されます。**IAU-76/FK5 と IAU-2006/2010 フレームを混合することはサポートされていません。**

## サポートされている ECI 参照フレーム

起点 `ECIo` と目的地 `ECIf` の両方に対してサポートされている ECI フレームは次のとおりです。

  * `TEME()`: ECI は真の赤道平均春分点 (TEME) 参照フレームとして選択されます。
  * `TOD()`: ECI は真の日時 (TOD) として選択されます。
  * `MOD()`: ECI は平均日時 (MOD) として選択されます。
  * `J2000()`: ECI は J2000 参照フレームとして選択されます。
  * `GCRF()`: ECI は地心天体参照フレーム (GCRF) として選択されます。
  * `CIRS()`: ECEF は天体中間参照系 (CIRS) として選択されます。
  * `ERS()`: ECI は地球参照系 (ERS) として選択されます。
  * `MOD06()`: ECI は IAU-2006/2010 理論の定義に従って平均日時 (MOD) として選択されます。
  * `MJ2000()`: ECI は J2000 平均赤道フレーム (MJ2000) として選択されます。

!!! note
    フレーム `MOD()` と `MOD06()` は実質的に同じです。ただし、異なる名前を選択して、どの理論が使用されているかを明確にするために、IAU-76/FK5 と IAU-2006/2010 のフレーム間の変換を混合する際には注意が必要です。


## 地球の回転パラメータ (EOP)

フレーム間の変換は EOP データに依存する場合があります (見てください [`fetch_iers_eop`](@ref) と [`read_iers_eop`](@ref))。IAU-76/FK5 モデルが使用される場合、`eop` の型は [`EopIau1980`](@ref) でなければなりません。そうでない場合、IAU-2006/2010 モデルが使用される場合、`eop` の型は [`EopIau2000A`](@ref) でなければなりません。以下の表は、選択されたフレームに応じた EOP データの要件を示しています。

| モデル                  | ECIo     | ECIf     | EOP データ     | 関数シグネチャ |
|:-------------------- |:-------- |:-------- |:----------- |:------- |
| IAU-76/FK5           | `GCRF`   | `J2000`  | EOP IAU1980 | 最初      |
| IAU-76/FK5           | `GCRF`   | `MOD`    | EOP IAU1980 | 最初      |
| IAU-76/FK5           | `GCRF`   | `TOD`    | EOP IAU1980 | 最初      |
| IAU-76/FK5           | `GCRF`   | `TEME`   | EOP IAU1980 | 最初      |
| IAU-76/FK5           | `J2000`  | `GCRF`   | EOP IAU1980 | 最初      |
| IAU-76/FK5           | `J2000`  | `MOD`    | 不要          | 最初      |
| IAU-76/FK5           | `J2000`  | `TOD`    | 不要          | 最初      |
| IAU-76/FK5           | `J2000`  | `TEME`   | 不要          | 最初      |
| IAU-76/FK5           | `MOD`    | `GCRF`   | EOP IAU1980 | 最初      |
| IAU-76/FK5           | `MOD`    | `J2000`  | 不要          | 最初      |
| IAU-76/FK5           | `MOD`    | `TOD`    | 不要          | 二番目     |
| IAU-76/FK5           | `MOD`    | `TEME`   | 不要          | 二番目     |
| IAU-76/FK5           | `TOD`    | `GCRF`   | EOP IAU1980 | 最初      |
| IAU-76/FK5           | `TOD`    | `J2000`  | 不要          | 最初      |
| IAU-76/FK5           | `TOD`    | `MOD`    | 不要          | 二番目     |
| IAU-76/FK5           | `TOD`    | `TEME`   | 不要          | 二番目     |
| IAU-76/FK5           | `TEME`   | `GCRF`   | EOP IAU1980 | 最初      |
| IAU-76/FK5           | `TEME`   | `J2000`  | 不要          | 最初      |
| IAU-76/FK5           | `TEME`   | `MOD`    | 不要          | 二番目     |
| IAU-76/FK5           | `TEME`   | `TOD`    | 不要          | 二番目     |
| IAU-2006/2010 CIOベース | `GCRF`   | `CIRS`   | 不要¹         | 最初      |
| IAU-2006/2010 CIOベース | `CIRS`   | `CIRS`   | 不要¹         | 二番目     |
| IAU-2006/2010 春分点ベース | `GCRF`   | `MJ2000` | 不要          | 最初²     |
| IAU-2006/2010 春分点ベース | `GCRF`   | `MOD06`  | 不要          | 最初      |
| IAU-2006/2010 春分点ベース | `GCRF`   | `ERS`    | 不要³         | 最初      |
| IAU-2006/2010 春分点ベース | `MJ2000` | `GCRF`   | 不要          | 最初²     |
| IAU-2006/2010 春分点ベース | `MJ2000` | `MOD06`  | 不要          | 最初      |
| IAU-2006/2010 春分点ベース | `MJ2000` | `ERS`    | 不要³         | 最初      |
| IAU-2006/2010 春分点ベース | `MOD06`  | `GCRF`   | 不要          | 最初      |
| IAU-2006/2010 春分点ベース | `MOD06`  | `MJ2000` | 不要          | 最初      |
| IAU-2006/2010 春分点ベース | `MOD06`  | `ERS`    | 不要³         | 最初      |
| IAU-2006/2010 春分点ベース | `ERS`    | `GCRF`   | 不要³         | 最初      |
| IAU-2006/2010 春分点ベース | `ERS`    | `MJ2000` | 不要³         | 最初      |
| IAU-2006/2010 春分点ベース | `ERS`    | `MOD06`  | 不要³         | 最初      |

`¹`: この場合、自由コア揺動と天体中間極 (CIP) の位置に関する時間依存効果を考慮する項は利用できず、精度が低下します。

`²`: GCRF と MJ2000 の間の変換はバイアスと呼ばれる定数回転行列です。したがって、日付はそれを変更しません。ただし、このシグネチャは API の複雑さを避けるために保持されました。

`³`: この場合、自由コア揺動による傾斜と経度の揺動を修正する項は利用できず、精度が低下します。

!!! info
    この関数では、EOP 補正が提供されていない場合、MOD および TOD フレームは元の IAU-76/FK5 理論を考慮して計算されます。そうでない場合、補正されたフレームが使用されます。


# 例

```julia-repl
julia> eop_iau1980 = fetch_iers_eop(Val(:IAU1980));

julia> r_eci_to_eci(DCM, GCRF(), J2000(), date_to_jd(1986, 6, 19, 21, 35, 0), eop_iau1980)
DCM{Float64}:
  1.0          -4.71326e-12   1.53474e-9
  4.71332e-12   1.0          -3.53979e-9
 -1.53474e-9    3.53979e-9    1.0

julia> r_eci_to_eci(Quaternion, TEME(), GCRF(), date_to_jd(1986, 6, 19, 21, 35, 0), eop_iau1980)
Quaternion{Float64}:
  + 0.999999 + 1.83013e-5⋅i + 0.000665304⋅j - 0.00151324⋅k

julia> r_eci_to_eci(TOD(), date_to_jd(1986,6,19,21,35,0), TOD(), date_to_jd(1987,5,19,3,0,0), eop_iau1980)
DCM{Float64}:
 1.0          -0.000224088  -9.73787e-5
 0.000224087   1.0          -5.80065e-6
 9.738e-5      5.77883e-6    1.0

julia> r_eci_to_eci(Quaternion, TOD(), JD_J2000, MOD(), JD_J2000, eop_iau1980)
Quaternion{Float64}:
  + 1.0 - 1.40025e-5⋅i + 1.34736e-5⋅j - 3.10785e-5⋅k

julia> r_eci_to_eci(J2000(), TEME(), date_to_jd(1986,6,19,21,35,0))
DCM{Float64}:
  0.999995    0.0030265    0.00133055
 -0.00302645  0.999995    -3.86125e-5
 -0.00133066  3.45854e-5   0.999999

julia> eop_iau2000a = fetch_iers_eop(Val(:IAU2000A));

julia> r_eci_to_eci(CIRS(), GCRF(), date_to_jd(1986,6,19,21,35,0), eop_iau2000a)
DCM{Float64}:
 0.999999     3.88389e-8  -0.00133066
 7.18837e-9   1.0          3.45897e-5
 0.00133066  -3.45897e-5   0.999999

julia> r_eci_to_eci(Quaternion, CIRS(), GCRF(), date_to_jd(1986,6,19,21,35,0), eop_iau2000a)
Quaternion{Float64}:
  + 1.0 + 1.72949e-5⋅i + 0.000665332⋅j + 7.91263e-9⋅k
```
