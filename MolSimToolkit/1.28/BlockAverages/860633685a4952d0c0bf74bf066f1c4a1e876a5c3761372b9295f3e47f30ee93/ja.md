```
block_average(
    x::AbstractVector{T};
    by = mean,
    min_block_size::Integer = 1,
    max_block_size::Integer = length(x),
    lags::Union{Nothing,AbstractVector{<:Integer}} = nothing,
) where {T<:Real}
```

この関数は、通常は時系列データの一連のデータから計算された特性の収束分析を行います。データはベクトル `x` に与えられ、`by` は推定される特性を定義します。通常は、デフォルトで平均値です。

2つの分析が行われます。1つはブロック平均で、データがブロックに分割され、各ブロック内の平均値（または `by` 値）が独立に計算されます。出力には、すべてのブロックから得られた最悪の推定値と、ブロックサイズの関数としての推定値の標準誤差が含まれます。

最後に、データの自己相関関数が計算され、単一の指数関数がフィッティングされ、相関の減衰の特性時間が得られます。

出力は `BlockAverageData{T}` 型の構造体になります。詳細については、対応するヘルプエントリを参照してください。

すべての結果は、便利な関数 `BlockAverage.plot` でプロットできます。

`lags` キーワードは、自己相関計算の間隔の範囲と長さを定義するために調整でき、指数フィットと相関曲線の形状に重要な影響を与えます。詳細については、`StatsBase.autocor` ヘルプを参照してください。

## 例

```julia-repl
julia> using MolSimToolkit

julia> x = BlockAverages.test_data(10^6); # サンプルデータ生成器

julia> b = block_average(x, lags=0:100:10^5)
-------------------------------------------------------------------
BlockAverageData{Float64}
-------------------------------------------------------------------
推定値（デフォルトで平均） = -0.13673023261452855
データ系列の長さ: 1000000

ブロックサイズ: [1, 2, ..., 500000, 1000000]

最大標準誤差（誤差、ブロックサイズ）: (0.23264202379194165, 500000)

最後の3つのブロックの偏差:
         割合: [-349.5348293165444, -170.1467329817311, -0.0]  
           絶対: [0.47791978519330647, 0.23264202379194168, 0.0]  

自己相関は最初にラグ16400でゼロになります。
自己相関減衰の特性時間: 
        系列長の割合として: 0.0037856443348888848
                            絶対: 3785.6443348888847
-------------------------------------------------------------------

julia> using Plots

julia> plot(b) # 結果をプロットします

```
