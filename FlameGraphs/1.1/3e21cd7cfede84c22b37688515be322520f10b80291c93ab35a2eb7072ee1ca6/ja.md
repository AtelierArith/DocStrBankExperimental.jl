```
img = flamepixels(fcolor, g; costscale=nothing)
```

フレームグラフをRGBカラーの行列として返し、色の選択をカスタマイズします。

## fcolor

`fcolor`は、コールスタック内の現在のアイテムに使用される色を返す関数です。デフォルトの`fcolor`の実装については、[`FlameColors`](@ref)を参照してください。

カスタム`fcolor`を提供する場合、以下のAPIをサポートする必要があります：

```
colorbg = fcolor(:bg)
colorfont = fcolor(:font)
```

背景色とフォント色を返さなければなりません。

```
colornode = fcolor(nextidx::Vector{Int}, j, data::NodeData)
```

`data`（[`NodeData`](@ref）を参照）で表されるノードの色を選択します。`j`はコールスタックの深さに対応し、`nextidx[j]`は次の色の選択のための状態を保持します。一般的に、色のリストがある場合、`fcolor`は`nextidx[j]`を循環させて、次の`j`での`fcolor`の呼び出しが次の色に進むようにする必要があります。（ただし、リストを循環する以外の手段で色を選択する場合は、`nextidx[j]`をインクリメントしないこともあります。）

`data.sf`にアクセスすることで、スタックフレームの識別に基づいて個々のノードの色を選択できます。

## costscale

`costscale`は、プロファイリング中に収集されたスタックトレースの数が多い場合に`img`のサイズを制限するために使用できます。`img`の最初の次元のサイズは、プロファイリング中に収集されたスタックトレースの総数に比例します。`costscale`は比例定数です。たとえば、`costscale=0.2`を設定すると、`size(img, 1)`はプロファイラーによって収集されたスタックトレースの数の約1/5になります。デフォルト値の`nothing`は、最初の次元に沿って約1000ピクセルの上限を課し、サンプル数が1000未満の場合は`costscale=1`が選択されます。
