無向配線図を関係記法を用いて構築します。

有向配線図のための `@program` マクロとは異なり、このマクロはJuliaプログラミング言語の通常の意味論から大きく逸脱しています。$n$ 引数を持つ関数呼び出しは、特定の点で $n$-元関係が成り立つという主張として解釈されます。例えば、二項関係 $R ⊆ X × Y$ と $S ⊆ Y × Z$ の合成は、次のマクロ呼び出しによって無向配線図として表現できます。

```julia
@relation (x,z) where (x::X, y::Y, z::Z) begin
  R(x,y)
  S(y,z)
end
```

一般に、`where` 節のコンテキストは図の接続点の集合を定義し、変数の共有はポートを接続点に配線することを定義します。`where` 節が省略されると、接続点の集合はマクロ呼び出しで使用される変数から推測されます。

図のポートと接続点は型指定されている場合とされていない場合があり、ポートは名前付きまたは名前なしのいずれかです。したがって、無向配線図の4つの可能なタイプが返され、タイプは関係ヘッダーの形式によって決まります。

1. 型指定なし、名前なし: `@relation (x,z) where (x,y,z) ...`
2. 型指定あり、名前なし: `@relation (x,z) where (x::X, y::Y, z::Z) ...`
3. 型指定なし、名前付き: `@relation (out1=x, out2=z) where (x,y,z) ...`
4. 型指定あり、名前付き: `@relation (out=1, out2=z) where (x::X, y::Y, z::Z) ...`

これら4つのタイプの図はすべて [`RelationDiagram`](@ref) のサブタイプです。
