![ParticleInCell.jl ロゴ](https://raw.githubusercontent.com/JuliaPlasma/ParticleInCell.jl/main/logo/logo.gif)

[![最新のドキュメント](https://img.shields.io/badge/docs-dev-blue.svg)](https://juliaplasma.github.io/ParticleInCell.jl/dev) [![CI ステータス](https://github.com/JuliaPlasma/ParticleInCell.jl/actions/workflows/CI.yml/badge.svg)](https://github.com/JuliaPlasma/ParticleInCell.jl/actions/workflows/CI.yml)

`ParticleInCell.jl` は、運動論的プラズマ物理シミュレーションのための Julia パッケージです。具体的には、粒子インセル (PIC) アルゴリズムを使用して運動論的（非熱的）プラズマのシミュレーションに焦点を当てています。現在、このパッケージはプレ1.0.0の状態にあり、したがって破壊的な変更が予想されます。しかし、これはまた、パッケージの機能を改善するための根本的な提案を受け入れる意欲があることも意味します。もし `ParticleInCell` をプラズマ研究に使用したいと考えていて、ニーズを満たしていない場合は、GitHub またはメールでご連絡いただければ、パッケージをどのように変更してニーズに合うようにできるかを話し合いましょう。

## 始めに

`ParticleInCell` は現在、Julia パッケージレジストリに登録されていません。したがって、このパッケージをインストールするには、`Pkg.develop` を使用する必要があります：

```julia
using Pkg
Pkg.develop(url="https://github.com/JuliaPlasma/ParticleInCell.jl")
```

## ドキュメント

最新のドキュメントは [こちら](https://juliaplasma.github.io/ParticleInCell.jl/dev) でご覧いただけます。

## 目標

  * 高速: 衝突なしで、粒子あたりステップごとに1マイクロ秒未満のコア時間を目指します。
  * 柔軟: `ParticleInCell.jl` で本質的にあらゆる運動論的プラズマシミュレーションを実装できるようにするべきです。一般的なタイプのシミュレーションでは、すでに含まれているコンポーネントを組み合わせるだけで済むかもしれません。より特殊な問題では、望ましいアルゴリズムを実装するカスタムタイプを書く必要があるかもしれません。このパッケージを Julia で書く利点は、これらのカスタムタイプがパッケージに含まれるネイティブコンポーネントと同じくらいパフォーマンスが良いことです。
  * スケーラブル: 最終的な目標は、Julia のネイティブマルチスレッドを使用して単一ノードでの並列化のために本質的に無制限のコア数にスケーリングできるようにし、ノード間の通信には `MPI.jl` を使用することです。目標は、2つの異なる並列化モードをサポートすることです：

      * 各コアは単一の長方形のサブドメインを担当します。ノード全体に割り当てられたドメインも長方形であり、これによりノードドメインを各コアのサブドメインに分割する方法に制約が課されます。負荷分散は、各コアがステップごとに同様の作業量を持つように、ドメインの相対的なサイズを変えることによって達成されます。
      * シミュレーションドメインは「パッチ」と呼ばれるサブドメインに分割され、各ノードには更新を担当するパッチのリストが割り当てられます。各ノードのコアはリスト上で協力して作業し、それぞれが作業するパッチを選択し、終了したら別のパッチを選択します。負荷分散は、ノード間でパッチを交換して作業負荷を均等にし、各ノードの責任の表面積を最小限に抑えることで通信時間を最小化することを目指して達成されます。このスキームが効果的に負荷分散を行うためには、パッチの総数がコアの総数よりも大きい（理想的にははるかに大きい）必要があります。
