```julia
partial_trace(
    M::Array{Array{T, 2}, 1},
    ed::KeldyshED.EDCore,
    target_soi::KeldyshED.Hilbert.SetOfIndices
) -> Union{Array{Float64, 3}, Matrix}

```

Compute a partial trace of a block-diagonal matrix `M`.

The matrix is expected to be written in the Fock state basis. The resulting reduced matrix acts in a [`Hilbert space`](@ref KeldyshED.Hilbert.FullHilbertSpace) spanned by all fermionic Fock states generated by the [`set of indices`](@ref KeldyshED.Hilbert.SetOfIndices) `target_soi`.
