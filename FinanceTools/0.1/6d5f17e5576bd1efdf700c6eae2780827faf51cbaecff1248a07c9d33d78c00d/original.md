Inplace version of split_adjust
