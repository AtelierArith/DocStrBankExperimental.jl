```
pcloud_diff(client::PCloudClient; kwargs...)
```

ユーザーのフォルダ/ファイルの更新をリストします。

オプションで、`diffid` パラメータを指定すると、その `diffid` 以降の変更のみが返されます。

また、`after` パラメータに日付/時刻を指定すると、その時刻以降に生成されたイベントのみを受け取ります。

`diffid` または `after` を提供する代わりに、`last` を提供することもでき、これにより最新の `diffid` を持つ `last` 数のイベントが返されます（つまり、最後のイベントです）。

特に `last` を 0 に設定すると、最後の `diffid` を返すだけの最適化が行われます。

オプションの `block` パラメータが設定されていて、指定された `diffid` 以降に変更がない場合、接続はイベントが到着するまでブロックされます。ブロッキングは `diffid` が提供されている場合のみ機能し、`after` または `last` では機能しません。

ただし、ブロックされた接続で追加のデータを送信すると、リクエストが解除され、空のセットが返されます。これは、アイドル状態のときに更新を監視し、必要に応じて他のアクティビティに接続を使用したい場合に便利です。

ブロックされた接続でリクエストを送信すると、空の更新セットと2回目のリクエストに対する応答の2つの返信を受け取ることになります。

オプションの `limit` パラメータが提供されている場合、`limit` エントリを超えることはありません。

*重要* フォルダ/ファイルがフォルダ内で作成/削除/移動された場合、親フォルダの修正時間をイベントのタイムスタンプに更新する必要があります。

*重要* 状態が6か月以上古い場合は、すべての状態を再ダウンロードすることをお勧めします。6か月以上古いデータを圧縮する権利を留保します。

圧縮とは、deletefolder/deletefile イベントが6か月以上古い場合、それはすべての create/modify イベントと共に完全に消えることを意味します。また、modifyfile が6か月以上古い場合、それは createfile になり、元の createfile は消えます。これは圧縮活動の包括的なリストではないため、圧縮に対処しようとするよりも、一般的にゼロから再ダウンロードするべきです。

出典: https://docs.pcloud.com/methods/general/diff.html

# オプション引数

  * `diffid::Int`: その diffid 以降の変更のみを受け取ります。
  * `after::datetime`: その時刻以降に生成されたイベントのみを受け取ります。
  * `last::Int`: 最新の `diffid` を持つイベントの数を返します（つまり、最後のイベントです）。
  * `block::Int`: 設定されている場合、イベントが到着するまで接続がブロックされます。diffid のみで機能します。
  * `limit::Int`: 提供されている場合、limit エントリを超えることはありません。

# 出力

成功した場合、返信には `entries` オブジェクトの配列と `diffid` が含まれます。すべてのイベントを処理した後、現在の `diffid` を提供された `diffid` に設定してください。処理中は、できればイベント自体との単一のトランザクションでイベントの `diffid` に状態を設定してください。

各オブジェクトには少なくとも次のものが含まれます：

  * `diffid::Int`: イベントの識別子
  * `time::datetime`: イベントのタイムスタンプ
  * `event::event`: 可能なイベントについてはここを参照してください

ほとんどの場合、メタデータも提供されます。

`diffid` は、このイベント以降の更新をリクエストするために使用できます。通常、diffid は増加する整数ですが、互いにキャンセルするイベント（例：createfolder、deletefolder）が同じリストにある場合は表示されないため、ID が連続しているとは限りません。

共有の場合、共有オブジェクトが提供されます。

イベントの `time` はイベントの時間です - イベントが createfolder であっても、`time` がフォルダの作成時間であることは保証されません。そのフォルダは他の誰かのフォルダであり、1年前に作成されたもので、あなたと共有されたばかりかもしれません。
