```
file_lock(client::PCloudClient; kwargs...)
```

ファイルディスクリプタ `fd` をロックまたはアンロックします。

このメソッドは、`type` パラメータに応じて動作します：

  * `0`: ロックを解除
  * `1`: 共有ロックを取得
  * `2`: 排他ロックを取得

`offset` パラメータが提供されている場合、このオフセットから始まるバイトのみがロックされます。

`length` パラメータが提供されている場合、`offset` から始まる `length` バイトのみがロックされます。長さが 0 の場合は、ファイルの終わりまでロックされます（どれだけ大きくなっても関係ありません）。

このメソッドのオフセットは、`whence` パラメータに応じて解釈されます：- `0`: オフセットはファイルの先頭から

  * `1`: オフセットは現在のオフセットから
  * `2`: オフセットはファイルの末尾から

`get` パラメータが設定されている場合、ロックを取得する代わりに、ファイル領域がロック可能かどうかのテストのみが実行されます。

デフォルトではロックはブロッキングであり、つまりロックが付与されるまで呼び出しはブロックされます（`get` が設定されている場合やアンロックのリクエストの場合を除く）。ロックがブロックされないようにしたい場合は、`noblock` パラメータを設定してください。

ロックは助言的ロックであり、ロックを取得しようとしないリーダー/ライターには強制されません。

ファイル領域に対しては、1 つのロックしか保持できません。共有ロックを排他ロックに変換する場合、その変換は原子的ではありません - 共有ロックは、排他ロックを取得する前に最初に解除される可能性があります。これは、排他ロックのリクエストがその時点で満たされない場合にのみ発生します。これは、2 つのプロセスがファイルに対して最初に共有ロックを保持し、その後それを排他ロックに変換しようとすることでデッドロックを防ぐために行われます。プロセスは、異なるファイル/領域に対して同時に 2 つのロックを取得することでデッドロックする可能性があります（それぞれ異なる順序で）。

API サーバーは、デッドロック検出のいかなる種類も実行しません。

ソース: https://docs.pcloud.com/methods/fileops/file_lock.html

# 引数

  * `fd::Int`: ロックまたはアンロックされるファイルディスクリプタ
  * `type::Int`: ファイルロックに対して実行される操作

# オプション引数

  * `offset::Int`: この位置から始まるバイトのみをロック（オフセットのデフォルトは 0）
  * `length::Int`: オフセットから始まる長さバイトのみをロック（長さのデフォルトは 0）
  * `whence::Int`: オフセットをどのように解釈するか（whence のデフォルトは 0）
  * `get::Int`: 設定されている場合、ファイル領域がロック可能かどうかのテストのみが実行される
  * `noblock::Int`: ロックがブロックされないようにしたい場合に設定

# 出力

呼び出しは、読み取り/書き込みエラーが発生しない限り常に成功します。ロックが付与されたかどうかに関わらず、結果は 0 になります。

ロックが付与されたかどうかを確認するには、戻り値フィールド `locked` を確認する必要があります。アンロックは常に `locked` を true に設定し、ブロッキングリクエストも常に成功するため、同様です（遅かれ早かれ）。

したがって、`result` が `0` の場合、`locked` の値を確認することは、ノンブロッキングロックおよび `get` チェックに対してのみ意味があります。

# 出力例

```
{
    result: 0,
    locked: true
}
```
