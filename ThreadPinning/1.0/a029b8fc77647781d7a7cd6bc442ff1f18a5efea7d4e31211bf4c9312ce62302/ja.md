```
pinthreads(cpuids;
    nthreads   = nothing,
    force      = true,
    warn       = is_first_pin_attempt(),
    threadpool = :default
)
```

Juliaスレッドを明示的または暗黙的なCPU IDのリストにピン留めします。後者は次の3つの方法で指定できます。

1. いくつかの事前定義されたシンボルのいずれかを渡すことによって（例：`pinthreads(:cores)`または`pinthreads(:sockets)`）、
2. ヘルパー関数を介して論理的な仕様を提供することによって（例：`pinthreads(numa(2, 1:4))`）、
3. 明示的に（例：`0:3`または`[0,12,4]`）。

これらのバリアントとキーワード引数に関する詳細は`??pinthreads`を参照してください。

# キーワード引数

設定されている場合、キーワード引数`nthreads`はカットオフとして機能します。つまり、最初の`min(length(cpuids), nthreads)`のJuliaスレッドがピン留めされます。

キーワード引数`threadpool`は、考慮すべきJuliaスレッドのプールを示すために使用できます。サポートされている値は`:default`（デフォルト）、`:interactive`、または`:all`です。Julia >= 1.11では、`:gc`に対する実験的なサポートもあります。

`force=false`の場合、スレッドは最初のピン留めの試行である場合にのみピン留めされます（そうでない場合、呼び出しは無操作です）。これは、単にユーザーによって上書き可能な「デフォルトのピン留め」を指定したいパッケージに特に便利です。

オプション`warn`は、BLASスレッド設定との望ましくない干渉など、一般的な警告を切り替えます。

# 拡張ヘルプ

**1) 事前定義されたシンボル**

  * `:cputhreads`または`:compact`：すべての利用可能なCPUスレッドに順次ピン留めします。
  * `:cores`：すべての利用可能なコアにスレッドを分散し、必要な場合にのみハイパースレッドを使用します。
  * `:sockets`：ソケット間でスレッドを分散（ラウンドロビン）、必要な場合にのみハイパースレッドを使用します。`compact=true`を設定すると、各ソケット内でコンパクトなピン留めが得られます。
  * `:numa`：NUMA/メモリドメイン間でスレッドを分散（ラウンドロビン）、必要な場合にのみハイパースレッドを使用します。`compact=true`を設定すると、各NUMA/メモリドメイン内でコンパクトなピン留めが得られます。
  * `:random`：スレッドをCPUスレッドにランダムにピン留めします。
  * `:current`：現在実行中のCPUスレッドにスレッドをピン留めします。
  * `:firstn`：OSインデックスに従って順番にCPUスレッドにスレッドをピン留めします。
  * `:affinitymask`：プロセスのアフィニティに従って異なるCPUスレッドにスレッドをピン留めします。デフォルトでは、`hyperthreads_last=true`です。

**2) 論理的仕様**

関数[`node`](@ref)、[`socket`](@ref)、[`numa`](@ref)、および[`core`](@ref)を使用して、特定のドメイン内のCPU IDを指定できます。さらに、関数[`sockets`](@ref)および[`numas`](@ref)を使用して、ソケットまたはNUMAドメイン間のラウンドロビンスキャターポリシーを表現できます。

*例（ドメイン）：*

  * `pinthreads(socket(1, 1:3))` # 最初のソケットの最初の3つのコアにピン留め
  * `pinthreads(socket(1, 1:3; compact=true))` # 最初のソケットの最初の3つのCPUスレッドにピン留め
  * `pinthreads(numa(2, [2,4,6]))` # 2番目、4番目、6番目のコアに2番目のNUMA/メモリドメインにピン留め
  * `pinthreads(node(ncores():-1:1))` # ノードの最後から始めて逆順にコアにスレッドをピン留め
  * `pinthreads(sockets())` # ソケット間でスレッドを散布、コアはハイパースレッドの前

異なるドメインは、ベクターで提供するか、`pinthreads`への別々の引数として連結できます。

*例（連結）：*

  * `pinthreads([socket(1, 1:3), numa(2, 4:6)])`
  * `pinthreads(socket(1, 1:3), numa(2, 4:6))`

**3) 明示的**

単にCPU IDの`AbstractVector{<:Integer}`を提供します。後者は、ゼロから始まる「物理的」OSインデックス（例：hwlocまたはlscpuから）であることが期待されます！
