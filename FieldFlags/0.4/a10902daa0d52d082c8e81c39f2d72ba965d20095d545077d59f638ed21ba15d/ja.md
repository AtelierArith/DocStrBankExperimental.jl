```
@bitfield [mutable] struct MyBits
    a:2
    b:3
    _[:3] # パディング; 幅が省略された場合は1ビットと仮定される
    c:1
end
```

さまざまなフィールドを表す構造体を構築し、サイズをビット単位で指定します。この構造体はオプションで`mutable`としてマークできます。

詳細は[`@bitflags`](@ref)を参照してください。

# 拡張ヘルプ

フィールドは、各フィールドが指定されたビット数だけを占めるコンパクトな形式で格納されます。フィールドアクセスは符号なし整数を返し、その下位ビットはアクセスされたフィールドのビットです。上位ビットはゼロに設定されます。特別なケースとして、サイズが`1`のフィールドは`Bool`を返します。明示的なパディングは、フィールド名を`_`と名付け、自由に選択した幅で指定できます。フィールド名（パディング以外）は一意である必要があります。指定されたビット数は`>= 0`でなければなりません。

フィールドが与えられる順序は、フィールドが格納される順序です。最初のフィールドは最下位ビットを占め、次のフィールドが続き、最後のフィールドは最上位ビットに格納されます。

例えば、上記の構造体は次のレイアウトを持っています：

| MSB |     |     |     |     |     |     |     | LSB |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|  c  |  _  |  _  |  _  |  b  |  b  |  b  |  a  |  a  |

ここで、`_`はパディングで、未定義の値を持ちます。

`@bitfield`で定義された構造体のために作成されたコンストラクタは、`Union{Int128, Int16, Int32, Int64, Int8, UInt128, UInt16, UInt32, UInt64, UInt8, Bool}`の任意の型を受け取り、上位ビットを切り捨てて正しいサイズに変換し、切り捨てられた値をオブジェクトに格納します。この切り捨ては、ミュータブルオブジェクトのフィールドに書き込むときにも発生します。

!!! 警告 "構造体のサイズ"     コンパイラの制限により、結果のオブジェクトのサイズは（現在）常に8ビットの倍数になります。これにより追加されるビットはパディングと見なされ、存在することを信頼できません。将来のリリースで通知なしに削除される可能性があります。特定のサイズまでパディングが必要な場合は、明示的に末尾のパディングフィールドを指定してください。

!!! 警告 "フィールドタイプ"     Juliaには可変サイズの整数がないため、フィールドアクセスの戻り値の型は、そのフィールドに必要なすべてのビットを保持するのに十分な大きさであることが保証されるだけです。現在、フィールドサイズが`1`より大きい場合は`UInt`を返しますが、これは特に保証されておらず、将来的に変更される可能性があるため、例えばサイズ`2`のフィールドが`UInt8`を返すこともあります。

# 例

```jldoctest
julia> @bitfield struct MyBits
           a:2
           b:3
           _:3 # パディング
           c:1
       end

julia> bits = MyBits(1,2,3)
MyBits(a: 0x1, b: 0x2, c: true)

julia> bits.a
0x0000000000000001

julia> bits.b
0x0000000000000002

julia> bits.c
true
```
