ユーザー提供の変換コールバックは、プロキシリクエストフローを実装し、最終的にはすべての実行経路を通じて、適切にterminate関数またはforward関数を呼び出します。

トンネリングプロキシ接続の場合、このリクエストフロートランスフォームは、プロキシ接続の確立のCONNECTステージにのみ適用されます。

フォワーディングプロキシ接続の場合、このリクエストフロートランスフォームは、接続上で送信されるすべてのhttpリクエストに適用されます。

フォワーディングプロキシ接続は、httpストリームの作成に大きな手術を加えずに真の非同期リクエスト変換をサポートできないため、現在のところ、トンネリングプロキシ用の非同期バージョンとフォワーディングプロキシ用の別の同期バージョンに分かれています。また、フォワーディングプロキシは、ある意味でレガシーの行き止まりの一種です。
