```
KalmanFilter(A,B,C,D,R1,R2,d0=MvNormal(R1); p = NullParameters(), α=1, check=true)
```

行列 `A,B,C,D` は動力学を定義します

```
x' = Ax + Bu + w
y  = Cx + Du + e
```

ここで `w ~ N(0, R1)`, `e ~ N(0, R2)` および `x(0) ~ d0` です。

行列は時間変化する可能性があり、例えば `A[:, :, t]` は時間インデックス `t` における $A$ 行列を含みます。また、次の形式の関数として与えることもできます。

```
Afun(x, u, p, t) -> A
```

関数を提供する際には、状態、入力、出力の次元 `nx, nu, ny` をキーワード引数として `KalmanFilter` コンストラクタに提供する必要があります。これは関数のシグネチャから推測できないためです。最大のパフォーマンスを得るためには、StaticArrays.jl から静的サイズの行列を提供してください。

α はオプションの「忘却係数」で、これが 1 より大きい値（例えば 1.01-1.2）に設定されている場合、フィルタは $R_1$ による共分散の膨張に加えて、[再帰的最小二乗 (RLS) 推定器](https://en.wikipedia.org/wiki/Recursive_least_squares_filter) に似た「指数的忘却」を示します。したがって、$R_1=0, R_2 = 1/α$ および $α > 1$ に設定することで RLS のようなアルゴリズムを得ることが可能です（$α$ は従来の RLS パラメータ $α = 1/λ$ の逆です）。共分散更新の正確な形式は次の通りです。

$$
R(t+1|t) = α AR(t)A^T + R_1
$$

`check = true (デフォルト)` の場合、関数は `A` の固有値が絶対値で 2 未満であることを確認します。大きな固有値は、システム行列が連続時間システムを表しており、ユーザーが離散化を忘れた可能性があることを示す場合があります。このチェックをオフにするには、`check = false` に設定してください。

# カルマンフィルタリングに関するチュートリアル

チュートリアル ["カルマンフィルタを調整する方法"](https://juliahub.com/pluto/editor.html?id=ad9ecbf9-bf83-45e7-bbe8-d2e5194f2240) では、カルマンフィルタに適切な共分散行列を見つける方法や、システムモデルに擾乱モデルを追加する方法について詳しく説明しています。また、[ドキュメント内のチュートリアル](https://baggepinnen.github.io/LowLevelParticleFilters.jl/stable/adaptive_kalmanfilter/) も参照してください。
