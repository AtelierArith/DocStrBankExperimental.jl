```
treemap(f, node)
```

ãƒ«ãƒ¼ãƒˆ `node` ã‚’æŒã¤æœ¨ã®ã™ã¹ã¦ã®ãƒŽãƒ¼ãƒ‰ã«é–¢æ•° `f` ã‚’é©ç”¨ã—ã¾ã™ã€‚ã“ã“ã§ã€`f` ã¯ `(v, ch)` ã‚’è¿”ã™é–¢æ•°ã§ã‚ã‚Šã€`v` ã¯ãƒŽãƒ¼ãƒ‰ã®æ–°ã—ã„å€¤ï¼ˆã™ãªã‚ã¡ [`nodevalue`](@ref) ã«ã‚ˆã£ã¦è¿”ã•ã‚Œã‚‹ã‚‚ã®ï¼‰ã§ã€`ch` ã¯ãƒŽãƒ¼ãƒ‰ã®æ–°ã—ã„å­ãƒŽãƒ¼ãƒ‰ã§ã™ã€‚`f` ã¯å†å¸°çš„ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ãŸã‚ã€è¦ªãƒŽãƒ¼ãƒ‰ã®ãŸã‚ã« `f` ãŒè¿”ã™ã™ã¹ã¦ã®å­ãƒŽãƒ¼ãƒ‰ã¯å†ã³å„å­ãƒŽãƒ¼ãƒ‰ã«å¯¾ã—ã¦å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€æœ¨ã®æ§‹é€ ã‚’ç¶­æŒã—ã¤ã¤æ–°ã—ã„å€¤ã«ãƒžãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ã¯ã€`f = node -> (g(node), children(node))` ã®ã‚ˆã†ã«ã€ãƒŽãƒ¼ãƒ‰ã®å€¤ã‚’è¿”ã™é–¢æ•° `g` ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

å‡ºåŠ›æœ¨ã®ãƒŽãƒ¼ãƒ‰ã¯ã™ã¹ã¦ã€è¿”ã•ã‚ŒãŸå€¤ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ [`MapNode`](@ref) ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦è¡¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€å‡ºåŠ›ã‚¿ã‚¤ãƒ—ãŒä»»æ„ã®æœ¨ã®ãƒˆãƒãƒ­ã‚¸ãƒ¼ã‚’è¨˜è¿°ã§ãã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚

ã»ã¨ã‚“ã©ã®ä¸€èˆ¬çš„ãªã‚±ãƒ¼ã‚¹ã§ã¯ã€æœ¨ã®ãƒŽãƒ¼ãƒ‰ã¯ãã®æŽ¥ç¶šæ€§ã«ä¾å­˜ã™ã‚‹åž‹ã§ã‚ã‚Šã€é–¢æ•° `f` ã¯ã“ã‚Œã‚’è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€æœ¨ `[1, [2, 3]]` ã¯æ•´æ•°ã®è‘‰ã‚’å«ã¿ã¾ã™ãŒã€2ã¤ã® `Vector` ãƒŽãƒ¼ãƒ‰ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€`treemap(f, [1, [2,3]])` ã® `f` ã¯ã€`Int` ã¾ãŸã¯ `Vector` ã®ã„ãšã‚Œã‹ã«å¯¾ã—ã¦æœ‰åŠ¹ãªé–¢æ•°ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã‚ã‚‹ã„ã¯ã€è‘‰ã®ã¿ã«æ“ä½œã‚’è¡Œã†ã«ã¯ `map(ð’», Leaves(itr))` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

`f` ã‚’è¨˜è¿°ã™ã‚‹ã®ã¯éžå¸¸ã«ç°¡å˜ã§ã™ãŒã€`treemap` ãŒã‚¹ã‚¿ãƒƒã‚¯ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã‚’å¼•ãèµ·ã“ã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€`f` ãŒæœ€çµ‚çš„ã«çµ‚äº†ã™ã‚‹ã“ã¨ã€ã™ãªã‚ã¡æ™‚ã€…ç©ºã® `children` ã‚’è¿”ã™ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãŸã¨ãˆã°ã€`f(n) = (nothing, [0; children(n)])` ã¯ã€ã™ã¹ã¦ã®ãƒŽãƒ¼ãƒ‰ãŒå°‘ãªãã¨ã‚‚1ã¤ã®å­ã‚’æŒã¤ãŸã‚ã€ã‚¹ã‚¿ãƒƒã‚¯ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚

åŠ¹çŽ‡çš„ãªåå¾©ã‚’å¯èƒ½ã«ã™ã‚‹ [`HasNodeType`](@ref) ã‚’æŒã¤æœ¨ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ä»£ã‚ã‚Šã« [`StableNode`](@ref) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ä¾‹

```julia
julia> t = [1, [2, 3]];

julia> f(n) = n isa AbstractArray ? (nothing, children(n)) : (n+1, children(n))

julia> treemap(f, t)
nothing
â”œâ”€ 2
â””â”€ nothing
   â”œâ”€ 3
   â””â”€ 4

julia> g(n) = isempty(children(n)) ? (nodevalue(n), []) : (nodevalue(n), [0; children(n)])
g (generic function with 1 method)

julia> treemap(g, t)
Any[1, [2, 3]]
â”œâ”€ 0
â”œâ”€ 1
â””â”€ [2, 3]
   â”œâ”€ 0
   â”œâ”€ 2
   â””â”€ 3
```
