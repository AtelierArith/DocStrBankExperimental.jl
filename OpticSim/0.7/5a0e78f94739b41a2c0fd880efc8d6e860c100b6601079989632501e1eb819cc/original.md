```
trace(system::AbstractOpticalSystem{T}, raygenerator::OpticalRayGenerator{T}; printprog = true, test = false)
```

Traces `system` with rays generated by `raygenerator` on a single thread. Optionally the progress can be printed to the REPL. If `test` is enabled then fresnel reflections are disabled and the power distribution will not be correct. If `outpath` is specified then the result will be saved to this path.

Returns the detector image of the system.
