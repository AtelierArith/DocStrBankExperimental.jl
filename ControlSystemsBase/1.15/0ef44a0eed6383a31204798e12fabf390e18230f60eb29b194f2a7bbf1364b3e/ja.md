```
observer_filter(sys, K; output_state = false)
```

オブザーバフィルタを返します 

$$
\begin{aligned}
\hat{x}(k|k) &= (I - KC)A\hat{x}(k-1|k-1) + (I - KC)Bu(k-1) + Ky(k) \\
\end{aligned}
$$

入力方程式 `[(I - KC)B K] * [u(k-1); y(k)]` に注意してください。

方程式の時間インデックスに注意してください。このフィルタは、ユーザーが*現在の* $y(k)$ を渡すことを前提としていますが、*過去の* $u(k-1)$ を渡します。つまり、このフィルタは、現在の制御入力が適用される*前*の状態を推定するために使用されます。これにより、このオブザーバによって生成された推定値に作用する状態フィードバックコントローラに直接項が生じます。

これは [`observer_predictor`](@ref) に似ていますが、予測器とは対照的に、フィルタ出力は現在の測定値に依存しますが、予測器出力は過去の測定値のみに依存します。

オブザーバフィルタは、連続時間システムに対する [`observer_predictor`](@ref) と同等です。

!!! note
    この定式化を使用するには、オブザーバゲイン `K` はペア `(A, CA)` のために設計されている必要があります `(A, C)` ではありません。これを行うには、[`place`](@ref) または [`kalman`](@ref) を呼び出すときに `direct = true` を渡してください。


参考文献: "Computer-Controlled Systems" Eq 4.32
