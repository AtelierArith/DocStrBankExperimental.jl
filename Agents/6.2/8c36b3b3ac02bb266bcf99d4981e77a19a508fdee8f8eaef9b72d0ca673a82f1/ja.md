```
GridSpace(d::NTuple{D, Int}; periodic = true, metric = :chebyshev)
```

タプル `d` によって与えられたサイズを持つ `GridSpace` を作成します。次元数 `D ≥ 1` を持ちます。オプションで、空間が周期的であるかどうか、距離のメトリックが何であるかを決定します。この空間の位置タイプは `NTuple{D, Int}` であり、便利のために [`GridAgent`](@ref) を使用します。有効な位置は、`i` 番目の次元に対して `1:d[i]` の範囲内のインデックスを持ちます。

`GridSpace` を使用した例は [シェリングの分離モデル](@ref Tutorial) です。

## 距離の指定

エージェントベースのモデリングにおいて隣接者を検索する際の一般的な用語は「フォン・ノイマン」近傍または「ムーア」近傍です。しかし、Agents.jl は任意の次元で隣接者を見つけるためのはるかに強力なインフラを提供するため、この確立された用語はもはや適切ではありません。代わりに、近傍を定義する距離は、任意の距離に対して明確に定義され、任意の次元に適用可能な適切なメトリック空間に従って指定されます。

許可されているメトリックは次のとおりです（プロットされた例についてはオンラインのドキュメントを参照してください）：

  * `:chebyshev` メトリックは、位置の `r`-近傍が、辺の長さが `2*floor(r)` で原点位置を中心とするハイパーキューブ内のすべての位置であることを意味します。これは、`r = 1` および二次元の場合の「ムーア」に似ています。
  * `:manhattan` メトリックは、位置の `r`-近傍が、原点位置の直交インデックスからマンハッタン距離 `≤ r` を持つすべての位置であることを意味します。これは、`r = 1` および二次元の場合の「フォン・ノイマン」に似ています。
  * `:euclidean` メトリックは、位置の `r`-近傍が、原点位置の直交インデックスからユークリッド距離 `≤ r` を持つすべての位置であることを意味します。

## チェビシェフメトリックにおける次元依存の高度な距離

`metric = :chebyshev` の場合、[`nearby_ids`](@ref) のような関数に `r` を提供する際に、距離の高度な指定が許可されます。

1. `r::NTuple{D,Int}` 例えば `r = (5, 2)` のように。これは、最初の次元での距離が5、2番目の次元での距離が2であることを意味します。これは、空間内の異なる座標を異なる範囲で検索する必要がある場合に便利です。例えば、空間が完全な建物に対応し、第三の次元が階数である場合です。
2. `r::Vector{Tuple{Int,UnitRange{Int}}}` 例えば `r = [(1, -1:1), (3, 1:2)]` のように。これは、指定された各次元における位置インデックスの差を明示的に指定することを可能にします。例として `r = [(1, -1:1), (3, 1:2)]` を [`nearby_ids`](@ref) に与えると、次元1では現在の位置の両側に1ステップの検索を行い（現在の位置も含むため `0 ∈ -1:1`）、次元3では現在の位置の上に1および2の位置を検索します。指定されていない次元（この例では2番目）は、その可能な範囲全体を検索します。

次元依存の距離の高度な指定の使用例については、[バトルロイヤル](https://juliadynamics.github.io/AgentsExampleZoo.jl/dev/examples/battle/) の例を参照してください。ここでは、一つの次元がカテゴリカルなものとして使用されています。
