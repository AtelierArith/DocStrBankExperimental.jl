# [Command-line Interface](@id cli)

## Using arguments inside scripts

Lorsque vous exécutez un script en utilisant `julia`, vous pouvez passer des arguments supplémentaires à votre script :

```
$ julia script.jl arg1 arg2...
```

Ces arguments supplémentaires de ligne de commande sont passés dans la constante globale `ARGS`. Le nom du script lui-même est passé en tant que `PROGRAM_FILE` global. Notez que `ARGS` est également défini lorsqu'une expression Julia est donnée en utilisant l'option `-e` sur la ligne de commande (voir la sortie d'aide de `julia` ci-dessous), mais `PROGRAM_FILE` sera vide. Par exemple, pour simplement imprimer les arguments donnés à un script, vous pourriez faire ceci :

```
$ julia -e 'println(PROGRAM_FILE); for x in ARGS; println(x); end' foo bar

foo
bar
```

Ou vous pourriez mettre ce code dans un script et l'exécuter :

```
$ echo 'println(PROGRAM_FILE); for x in ARGS; println(x); end' > script.jl
$ julia script.jl foo bar
script.jl
foo
bar
```

Le délimiteur `--` peut être utilisé pour séparer les arguments de ligne de commande destinés au fichier de script des arguments destinés à Julia :

```
$ julia --color=yes -O -- script.jl arg1 arg2..
```

Voir aussi [Scripting](@ref man-scripting) pour plus d'informations sur l'écriture de scripts Julia.

## The `Main.main` entry point

À partir de Julia 1.11, `Base` exporte le macro `@main`. Ce macro s'étend au symbole `main`, mais à la fin de l'exécution d'un script ou d'une expression, `julia` tentera d'exécuter la fonction `Main.main(ARGS)` si une telle fonction a été définie et que ce comportement a été choisi en utilisant le macro `@main`.

Cette fonctionnalité est destinée à aider à l'unification des flux de travail compilés et interactifs. Dans les flux de travail compilés, le chargement du code qui définit la fonction `main` peut être spatialement et temporellement séparé de l'invocation. Cependant, pour les flux de travail interactifs, le comportement est équivalent à un appel explicite de `exit(main(ARGS))` à la fin du script ou de l'expression évaluée.

!!! compat "Julia 1.11"
    Le point d'entrée spécial `Main.main` a été ajouté dans Julia 1.11. Pour assurer la compatibilité avec les versions antérieures de Julia, ajoutez une ligne explicite `@isdefined(var"@main") ? (@main) : exit(main(ARGS))` à la fin de vos scripts.


Pour voir cette fonctionnalité en action, considérez la définition suivante, qui exécutera la fonction print malgré l'absence d'appel explicite à `main` :

```
$ julia -e '(@main)(args) = println("Hello World!")'
Hello World!
$
```

Seul le binding `main` dans le module `Main` a ce comportement et uniquement si le macro `@main` a été utilisé dans le module définissant.

Par exemple, utiliser `hello` au lieu de `main` ne fera pas exécuter la fonction `hello` :

```
$ julia -e 'hello(ARGS) = println("Hello World!")'
$
```

et une définition simple de `main` ne le fera pas non plus :

```
$ julia -e 'main(ARGS) = println("Hello World!")'
$
```

Cependant, l'opt-in n'a pas besoin de se produire au moment de la définition :

```
$ julia -e 'main(ARGS) = println("Hello World!"); @main'
Hello World!
$
```

Le lien `main` peut être importé d'un paquet. Un paquet *hello world* défini comme

```
module Hello

export main
(@main)(args) = println("Hello from the package!")

end
```

peut être utilisé comme :

```
$ julia -e 'using Hello'
Hello from the package!
$ julia -e 'import Hello' # N.B.: Execution depends on the binding not whether the package is loaded
$
```

Cependant, notez que la recommandation actuelle des meilleures pratiques est de ne pas mélanger le code d'application et le code de bibliothèque réutilisable dans le même package. Les applications d'aide peuvent être distribuées sous forme de packages séparés ou en tant que scripts avec des points d'entrée `main` séparés dans le dossier `bin` d'un package.

## Parallel mode

Julia peut être démarré en mode parallèle avec les options `-p` ou `--machine-file`. `-p n` lancera `n` processus de travail supplémentaires, tandis que `--machine-file file` lancera un travailleur pour chaque ligne dans le fichier `file`. Les machines définies dans `file` doivent être accessibles via une connexion `ssh` sans mot de passe, avec Julia installé au même emplacement que l'hôte actuel. Chaque définition de machine prend la forme `[count*][user@]host[:port] [bind_addr[:port]]`. `user` par défaut est l'utilisateur actuel, `port` au port ssh standard. `count` est le nombre de travailleurs à créer sur le nœud, et par défaut à 1. L'optionnelle `bind-to bind_addr[:port]` spécifie l'adresse IP et le port que les autres travailleurs doivent utiliser pour se connecter à ce travailleur.

## Startup file

Si vous avez du code que vous souhaitez exécuter chaque fois que Julia est lancé, vous pouvez le placer dans `~/.julia/config/startup.jl` :

```
$ echo 'println("Greetings! 你好! 안녕하세요?")' > ~/.julia/config/startup.jl
$ julia
Greetings! 你好! 안녕하세요?

...
```

Notez que bien que vous deviez avoir un répertoire `~/.julia` une fois que vous avez exécuté Julia pour la première fois, vous devrez peut-être créer le dossier `~/.julia/config` et le fichier `~/.julia/config/startup.jl` si vous l'utilisez.

Pour que le code de démarrage s'exécute uniquement dans [The Julia REPL](@ref) (et pas lorsque `julia` est *par exemple* exécuté sur un script), utilisez [`atreplinit`](@ref) dans `startup.jl` :

```julia
atreplinit() do repl
    # ...
end
```

## [Command-line switches for Julia](@id command-line-interface)

Il existe plusieurs façons d'exécuter du code Julia et de fournir des options, similaires à celles disponibles pour les programmes `perl` et `ruby` :

```
julia [switches] -- [programfile] [args...]
```

La liste suivante est une liste complète des options de ligne de commande disponibles lors du lancement de julia (un '*' marque la valeur par défaut, si applicable ; les paramètres marqués '($)' peuvent déclencher la précompilation des paquets) :

| Switch                                            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|:------------------------------------------------- |:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `-v`, `--version`                                 | Display version information                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `-h`, `--help`                                    | Print command-line options (this message)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `--help-hidden`                                   | Print uncommon options not shown by `-h`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `--project[={<dir>\|@.}]`                         | Set `<dir>` as the active project/environment. The default `@.` option will search through parent directories until a `Project.toml` or `JuliaProject.toml` file is found.                                                                                                                                                                                                                                                                                                                                                                                    |
| `-J`, `--sysimage <file>`                         | Start up with the given system image file                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `-H`, `--home <dir>`                              | Set location of `julia` executable                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `--startup-file={yes*\|no}`                       | Load `JULIA_DEPOT_PATH/config/startup.jl`; if [`JULIA_DEPOT_PATH`](@ref JULIA_DEPOT_PATH) environment variable is unset, load `~/.julia/config/startup.jl`                                                                                                                                                                                                                                                                                                                                                                                                    |
| `--handle-signals={yes*\|no}`                     | Enable or disable Julia's default signal handlers                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `--sysimage-native-code={yes*\|no}`               | Use native code from system image if available                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `--compiled-modules={yes*\|no\|existing\|strict}` | Enable or disable incremental precompilation of modules. The `existing` option allows use of existing compiled modules that were previously precompiled, but disallows creation of new precompile files. The `strict` option is similar, but will error if no precompile file is found.                                                                                                                                                                                                                                                                       |
| `--pkgimages={yes*\|no\|existing}`                | Enable or disable usage of native code caching in the form of pkgimages. The `existing` option allows use of existing pkgimages but disallows creation of new ones                                                                                                                                                                                                                                                                                                                                                                                            |
| `-e`, `--eval <expr>`                             | Evaluate `<expr>`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `-E`, `--print <expr>`                            | Evaluate `<expr>` and display the result                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `-m`, `--module <Package> [args]`                 | Run entry point of `Package` (`@main` function) with `args'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `-L`, `--load <file>`                             | Load `<file>` immediately on all processors                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `-t`, `--threads {auto\|N[,auto\|M]}`             | Enable N[+M] threads; N threads are assigned to the `default` threadpool, and if M is specified, M threads are assigned to the `interactive` threadpool; `auto` tries to infer a useful default number of threads to use but the exact behavior might change in the future. Currently sets N to the number of CPUs assigned to this Julia process based on the OS-specific affinity assignment interface if supported (Linux and Windows) or to the number of CPU threads if not supported (MacOS) or if process affinity is not configured, and sets M to 1. |
| `--gcthreads=N[,M]`                               | Use N threads for the mark phase of GC and M (0 or 1) threads for the concurrent sweeping phase of GC. N is set to half of the number of compute threads and M is set to 0 if unspecified.                                                                                                                                                                                                                                                                                                                                                                    |
| `-p`, `--procs {N\|auto}`                         | Integer value N launches N additional local worker processes; `auto` launches as many workers as the number of local CPU threads (logical cores)                                                                                                                                                                                                                                                                                                                                                                                                              |
| `--machine-file <file>`                           | Run processes on hosts listed in `<file>`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `-i`, `--interactive`                             | Interactive mode; REPL runs and `isinteractive()` is true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `-q`, `--quiet`                                   | Quiet startup: no banner, suppress REPL warnings                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `--banner={yes\|no\|short\|auto*}`                | Enable or disable startup banner                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `--color={yes\|no\|auto*}`                        | Enable or disable color text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `--history-file={yes*\|no}`                       | Load or save history                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `--depwarn={yes\|no*\|error}`                     | Enable or disable syntax and method deprecation warnings (`error` turns warnings into errors)                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `--warn-overwrite={yes\|no*}`                     | Enable or disable method overwrite warnings                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `--warn-scope={yes*\|no}`                         | Enable or disable warning for ambiguous top-level scope                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `-C`, `--cpu-target <target>`                     | Limit usage of CPU features up to `<target>`; set to `help` to see the available options                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `-O`, `--optimize={0\|1\|2*\|3}`                  | Set the optimization level (level is 3 if `-O` is used without a level) ($)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `--min-optlevel={0*\|1\|2\|3}`                    | Set the lower bound on per-module optimization                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `-g`, `--debug-info={0\|1*\|2}`                   | Set the level of debug info generation (level is 2 if `-g` is used without a level) ($)                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `--inline={yes\|no}`                              | Control whether inlining is permitted, including overriding `@inline` declarations                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `--check-bounds={yes\|no\|auto*}`                 | Emit bounds checks always, never, or respect `@inbounds` declarations ($)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `--math-mode={ieee,fast}`                         | Disallow or enable unsafe floating point optimizations (overrides `@fastmath` declaration)                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `--polly={yes*\|no}`                              | Enable or disable the polyhedral optimizer Polly (overrides @polly declaration)                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `--code-coverage[={none*\|user\|all}]`            | Count executions of source lines (omitting setting is equivalent to `user`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `--code-coverage=@<path>`                         | Count executions but only in files that fall under the given file path/directory. The `@` prefix is required to select this option. A `@` with no path will track the current directory.                                                                                                                                                                                                                                                                                                                                                                      |
| `--code-coverage=tracefile.info`                  | Append coverage information to the LCOV tracefile (filename supports format tokens).                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `--track-allocation[={none*\|user\|all}]`         | Count bytes allocated by each source line (omitting setting is equivalent to "user")                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `--track-allocation=@<path>`                      | Count bytes but only in files that fall under the given file path/directory. The `@` prefix is required to select this option. A `@` with no path will track the current directory.                                                                                                                                                                                                                                                                                                                                                                           |
| `--bug-report=KIND`                               | Launch a bug report session. It can be used to start a REPL, run a script, or evaluate expressions. It first tries to use BugReporting.jl installed in current environment and falls back to the latest compatible BugReporting.jl if not. For more information, see `--bug-report=help`.                                                                                                                                                                                                                                                                     |
| `--heap-size-hint=<size>`                         | Forces garbage collection if memory usage is higher than the given value. The value may be specified as a number of bytes, optionally in units of KB, MB, GB, or TB, or as a percentage of physical memory with %.                                                                                                                                                                                                                                                                                                                                            |
| `--compile={yes*\|no\|all\|min}`                  | Enable or disable JIT compiler, or request exhaustive or minimal compilation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `--output-o <name>`                               | Generate an object file (including system image data)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `--output-ji <name>`                              | Generate a system image data file (.ji)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `--strip-metadata`                                | Remove docstrings and source location info from system image                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `--strip-ir`                                      | Remove IR (intermediate representation) of compiled functions                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `--output-unopt-bc <name>`                        | Generate unoptimized LLVM bitcode (.bc)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `--output-bc <name>`                              | Generate LLVM bitcode (.bc)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `--output-asm <name>`                             | Generate an assembly file (.s)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `--output-incremental={yes\|no*}`                 | Generate an incremental output file (rather than complete)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `--trace-compile={stderr\|name}`                  | Print precompile statements for methods compiled during execution or save to a path                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `--image-codegen`                                 | Force generate code in imaging mode                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `--permalloc-pkgimg={yes\|no*}`                   | Copy the data section of package images into memory                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

!!! compat "Julia 1.1"
    Dans Julia 1.0, l'option par défaut `--project=@.` ne recherchait pas à partir du répertoire racine d'un dépôt Git pour le fichier `Project.toml`. À partir de Julia 1.1, c'est le cas.

