```
CoordinateMapCached{P,M,PSL,TM}(proc::P, model::M, psl::PSL, in_moms::TM)
```

`CoordinateMapCached`は、入射粒子の運動量がキャッシュされた位相空間座標の事前計算された変換を表します。これは、入射運動量が一定で、出射運動量のみが新しい座標に基づいて計算される場合に、パフォーマンスを向上させることができます。

キャッシュされたマップは、散乱過程（`proc`）、物理モデル（`model`）、位相空間レイアウト（`psl`）、および事前計算された入射運動量（`in_moms`）をカプセル化します。

## フィールド

  * `proc`: 入射粒子と出射粒子を定義する散乱過程の定義。
  * `model`: 相互作用のタイプと運動量分布を支配する物理モデル。
  * `psl`: 座標を運動量にマッピングする入射または出射の位相空間レイアウト。
  * `in_moms`: 通常は`Tuple`である入射粒子の事前計算された四運動量のコレクション。

## 使用法

### キャッシュされた入射座標

`psl::AbstractInPhaseSpaceLayout`で構築された`CoordinateMapCached`が引数なしで呼び出されると、事前計算された入射運動量（`in_moms`）が直接返されます。これは、すでに計算されてマップに保存されている入射粒子の運動量に効率的にアクセスする方法を提供します。

```julia
# 入射位相空間のための座標マップを作成
in_coord_map = CoordinateMapCached(proc, model, in_psl, in_moms)

# 入射運動量を返すための呼び出し
in_coord_map()
```

  * **返り値**: 入射粒子のための四運動量のキャッシュされたタプル。

### 出射座標

`CoordinateMapCached`は出射位相空間座標（`out_coords`）で呼び出すことができます。キャッシュされた入射運動量（`in_moms`）を使用して、総運動量（`Ptot`）を計算し、その後出射座標と共に渡して出射粒子の運動量を計算します。

```julia
# 出射位相空間のための座標マップを作成
out_coord_map = CoordinateMapCached(proc, model, out_psl, in_moms)

# 出射運動量を返すための出射座標での呼び出し
out_coord_map(out_coords)
```

  * **引数**:

      * `out_coords`: 出射粒子のための位相空間座標のタプル。
  * **返り値**:

      * キャッシュされた入射運動量から導出された総運動量と一致する出射粒子のための四運動量のタプル。

## 注意事項

  * **キャッシング**: `CoordinateMapCached`は、入射運動量が固定されているか、頻繁に変化しない場合に便利で、入射運動量をキャッシュに保存することで再計算を回避します。
  * **効率性**: このキャッシングメカニズムは、固定された入射粒子で散乱過程を繰り返し評価する際に、パフォーマンスを大幅に向上させることができますが、出射構成が変化します。
  * この型は、入射および出射の運動量の両方を処理するように設計されており、過程のエネルギーと運動量の保存を確保します。

```
