```
CoordinateMap{P,M,PSL}(proc::P, model::M, psl::PSL)
```

`CoordinateMap`は、特定の散乱過程に対して位相空間座標を粒子の運動量にマッピングする変換を表します。このタイプは、散乱過程の定義（`proc`）、物理モデル（`model`）、および位相空間のレイアウト（`psl`）をカプセル化します。`CoordinateMap`は呼び出し可能で、入射および出射の位相空間座標を四運動量に変換することをサポートします。

## フィールド

  * `proc`: 散乱過程の定義、`AbstractProcessDefinition`のサブタイプ。
  * `model`: 物理モデル、`AbstractModelDefinition`のサブタイプ。
  * `psl`: 座標を運動量にマッピングする入射または出射の位相空間レイアウト。

## 使用法

### 入射座標

`CoordinateMap`は、入射位相空間座標のタプル（`in_coords`）を使って呼び出すことができ、これを用いて対応する入射粒子の四運動量を計算します。これは、`CoordinateMap`で提供された`proc`、`model`、および`psl`を使用して、位相空間構築関数[`QEDbase.build_momenta`](@extref)を呼び出すことで行われます。

```julia
# 入射位相空間のための座標マップを作成
in_coord_map = CoordinateMap(proc, model, in_psl)

# 入射座標で運動量を構築するために呼び出す
in_coord_map(in_coords)
```

  * **引数**:

      * `in_coords`: 入射粒子のための位相空間座標のタプル。
  * **戻り値**: 入射粒子に対応する四運動量のタプル。

### 入射および出射座標

`CoordinateMap`は、入射（`in_coords`）および出射（`out_coords`）の位相空間座標の両方で呼び出すこともできます。入射運動量が最初に計算され、その後、これらの運動量を合計して総運動量（`Ptot`）が計算されます。この総運動量は、提供された出射位相空間レイアウトを使用して出射粒子の四運動量を計算するために使用されます。

```julia
# 出射位相空間のための座標マップを作成
coord_map = CoordinateMap(proc, model, out_psl)

# 入射および出射座標で運動量を構築するために呼び出す
coord_map(in_coords, out_coords)
```

  * **引数**:

      * `in_coords`: 入射粒子のための位相空間座標のタプル。
      * `out_coords`: 出射粒子のための位相空間座標のタプル。
  * **戻り値**:

      * 最初の要素が入射粒子の運動量で、2番目の要素が出射粒子の運動量であるタプル。両方とも四運動量のタプルとして表されます。

## 注意事項

  * `CoordinateMap`は、位相空間座標を物理的に意味のある四運動量に変換するための柔軟なメカニズムを提供し、散乱過程、物理モデル、および位相空間レイアウトとの整合性を確保します。
  * このタイプは、入射および出射の運動量の両方を処理するように設計されており、過程のエネルギーと運動量の保存を確保します。

```
