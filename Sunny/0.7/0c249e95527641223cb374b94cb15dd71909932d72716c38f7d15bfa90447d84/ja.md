```
ssf_custom(f, sys::System; apply_g=true, formfactors=nothing)
```

ã‚«ã‚¹ã‚¿ãƒ åç¸®é–¢æ•° `f` ã‚’ç”¨ã„ã¦ã‚¹ãƒ”ãƒ³æ§‹é€ å› å­ã®æ¸¬å®šã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®é–¢æ•°ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªç›´äº¤åº§æ¨™ç³»ã«ãŠã‘ã‚‹æ³¢ãƒ™ã‚¯ãƒˆãƒ« $ğª$ ã¨ã€æ§‹é€ å› å­å¼·åº¦æˆåˆ† $\mathcal{S}^{Î±Î²}(ğª,Ï‰)$ ã‚’æŒã¤ 3Ã—3 è¡Œåˆ—ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ $(Î±, Î²)$ ã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«åº§æ¨™ç³»ã«ãŠã‘ã‚‹åŒæ¥µå­æˆåˆ†ã‚’ç¤ºã—ã¾ã™ã€‚`f` ã®æˆ»ã‚Šå€¤ã¯ä»»æ„ã®æ•°ã¾ãŸã¯ `isbits` å‹ã§ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç‰¹å®šã® `f` ã®é¸æŠã«ã‚ˆã‚Šã€[`ssf_perp`](@ref) ã‚„ [`ssf_trace`](@ref) ã§å®šç¾©ã•ã‚ŒãŸã‚ˆã†ãªæ¸¬å®šã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€gå› å­ã¾ãŸã¯ãƒ†ãƒ³ã‚½ãƒ«ãŒå„ã‚µã‚¤ãƒˆã§é©ç”¨ã•ã‚Œã€æ§‹é€ å› å­æˆåˆ†ã¯ç£æ°—ãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆæ¼”ç®—å­é–“ã®ç›¸é–¢ã‚’ç¤ºã—ã¾ã™ã€‚è£¸ã®ã‚¹ãƒ”ãƒ³æ¼”ç®—å­é–“ã®ç›¸é–¢ã‚’æ¸¬å®šã™ã‚‹ã«ã¯ã€`apply_g=false` ã«è¨­å®šã—ã¾ã™ã€‚

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã® `formfactors` ã¯ã€å¯¾ç§°çš„ã«ç•°ãªã‚‹åŸå­ã®å®Œå…¨ãªã‚»ãƒƒãƒˆã§ã‚ã‚‹ `i1, i2, ...` ã«å¯¾ã—ã¦ã€ãƒšã‚¢ `[i1 => FormFactor(...), i2 => ...]` ã®ãƒªã‚¹ãƒˆã§æ§‹æˆã•ã‚Œã€å„ [`FormFactor`](@ref) ã¯æŒ‡å®šã•ã‚ŒãŸåŸå­ã«å¯¾ã™ã‚‹ $ğª$-ç©ºé–“ã®æ¸›è¡°ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

[`SpinWaveTheory`](@ref) ãŠã‚ˆã³ [`SampledCorrelations`](@ref) ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã®ä½¿ç”¨ã‚’æ„å›³ã—ã¦ã„ã¾ã™ã€‚

# ä¾‹

```julia
# ã™ã¹ã¦ã®æ§‹é€ å› å­æˆåˆ† Sáµ…áµ ã‚’ 3Ã—3 è¡Œåˆ—ã¨ã—ã¦æ¸¬å®š
measure = ssf_custom((q, ssf) -> ssf, sys)

# æ§‹é€ å› å­ãƒˆãƒ¬ãƒ¼ã‚¹ Sáµ…áµ… ã‚’æ¸¬å®š
measure = ssf_custom((q, ssf) -> real(ssf[1, 1] + ssf[2, 2] + ssf[3, 3]), sys)
```

æ§‹é€ å› å­ã®æ…£ç¿’ã«é–¢ã™ã‚‹ Sunny ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚å‚ç…§ã—ã¦ãã ã•ã„ [Structure Factor Conventions](@ref).
