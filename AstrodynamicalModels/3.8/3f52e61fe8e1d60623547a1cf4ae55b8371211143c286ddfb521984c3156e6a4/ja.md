```julia
NBFunction(N; stm, name, kwargs...)

```

`ODEFunction`をNBPダイナミクスのために返します。`ODEFunction`の引数における状態とパラメータの順序は、`NBP(N)`で生成されるシステムの状態とパラメータの順序に相当します。一般的なルールとして、状態の順序は次のようになります: `[x₁, y₁, z₁, ..., xₙ, yₙ, zₙ, ẋ₁, ẏ₁, ż₁, ..., ẋₙ, ẏₙ, żₙ]`。

!!! note
    `R2BP`や`CR3BP`とは異なり、`jac`はデフォルトで`false`に設定されています。`NBP`システムの状態数は、比較的小さな数の天体（`N`）に対して非常に大きくなる可能性があります。デフォルトで`jac=true`を有効にすると、`N ≥ 3`の場合、この@memoize関数が返すまでに不必要に長い待機時間が発生します。`N=2`で`stm=true`の場合、`jac=true`を設定すると、使用しているコンピュータによっては数分の計算が必要になることがあります。


!!! warning
    `N ≥ 3`のシステムに対して`stm=true`を指定する際は注意してください！状態遷移行列ダイナミクスが有効になっている場合、システムの状態の総数は`N*6 + (N*6)^2`で計算できます。これは`N`が増えるにつれて指数関数的に増加することに注意してください！`N == 6`の場合、並列処理を使用していない限り、コンピュータは数時間実行される可能性があります。


# 拡張ヘルプ

### 使用法

`stm`および`name`キーワード引数は`NBP`に渡されます。他のすべてのキーワード引数は直接`SciMLBase.ODEFunction`に渡されます。

```julia
f = NBFunction(3; stm=false, name=:NBP, jac=false, sparse=false)
let u = randn(3*6), p = randn(1 + 3), t = 0
    f(u, p, t)
end
```
