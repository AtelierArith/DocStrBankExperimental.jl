```
setup_model(config, data) -> model
```

E4STのために`config`と`data`を使用してJuMPモデルを設定します。

# パラメータ

| 名前                     | シンボル         | 説明               |
|:---------------------- |:------------ |:---------------- |
| $N_G$                  | :num_gen     | 発電機の数            |
| $N_B$                  | :num_bus     | バスの数             |
| $N_L$                  | :num_branch  | ブランチの数           |
| $G = \{1,2,...,N_G \}$ | N/A          | 発電機インデックスの集合     |
| $B = \{1,2,...,N_B \}$ | N/A          | バインデックスの集合       |
| $L = \{1,2,...,N_L \}$ | N/A          | ブランチインデックスの集合    |
| $g \in G$              | :gen_idx     | 発電機インデックス        |
| $b \in B$              | :bus_idx     | バスインデックス         |
| $l \in L$              | :branch_idx  | ブランチインデックス       |
| $y \in Y$              | :year_idx    | 年インデックス          |
| $y_{S_g} \in Y$        | :year*on*idx | 発電機`g`の開始年インデックス |

# 変数

これらは最適化される意思決定変数です。`model[symbol]`でアクセスできます。

| 名前               | シンボル          | 単位   | 説明                            |
|:---------------- |:------------- |:---- |:----------------------------- |
| $\theta_{b,y,h}$ | `:θ_bus`      | ラジアン | 各バスの時間ごとの電圧角度。基準バスは0.0に固定されます |
| $P_{G_{g,y,h}}$  | `:pgen_gen`   | MW   | 各発電機によって生成される時間ごとの平均電力        |
| $P_{C_{g,y}}$    | `:pcap_gen`   | MW   | 各発電機の年間発電能力                   |
| $P_{S_{b,y,h}}$  | `:plserv_bus` | MW   | 各バスに供給される時間ごとの平均電力            |

# 式

式は変数の線形結合として計算されます。`model[symbol]`でアクセスできます。

| 名前              | シンボル            | 単位  | 説明                    |
|:--------------- |:--------------- |:--- |:--------------------- |
| $P_{F_{l,y,h}}$ | `:pflow_branch` | MW  | 各ブランチを通過する時間ごとの平均電力   |
| $P_{F_{b,y,h}}$ | `:pflow_bus`    | MW  | 各バスから流出する時間ごとの平均ネット電力 |
| $P_{U_{b,y,h}}$ | `:plcurt_bus`   | MW  | 各バスで制限される時間ごとの平均電力    |
| $P_{G_{b,y,h}}$ | `:pgen_bus`     | MW  | 各バスで生成される時間ごとの平均電力    |

# 制約

| 名前                            | 制約                                                                               | シンボル                     | 単位  | 説明                                                      |
|:----------------------------- |:-------------------------------------------------------------------------------- |:------------------------ |:--- |:------------------------------------------------------- |
| $C_{PB_{b,y,h}}$              | $P_{G_{b,y,h}} - P_{S_{b,y,h}} \geq P_{F_{b,y,h}}$                               | `:cons_pbal_geq`         | MW  | 各バスでの電力フローを制約します                                        |
| $C_{PB_{b,y,h}}$              | $P_{G_{b,y,h}} - P_{S_{b,y,h}} \leq P_{F_{b,y,h}}$                               | `:cons_pbal_leq`         | MW  | 各バスでの電力フローを制約します                                        |
| $C_{PG_{g,y,h}}^{\text{min}}$ | $P_{G_{g,y,h}} \geq P_{C_{b,y}}^{\text{min}}$                                    | `:cons_pgen_min`         | MW  | 生成される電力を最小容量ファクター以上に制約します。                              |
| $C_{PG_{g,y,h}}^{\text{max}}$ | $P_{G_{g,y,h}} \leq P_{C_{b,y}}^{\text{max}}$                                    | `:cons_pgen_max`         | MW  | 生成される電力を最小（可用性ファクター、最大容量ファクター）の下に制約します。                 |
| $C_{PS_{g,y,h}}^{\text{min}}$ | $P_{S_{b,y,h}} \geq 0$                                                           | `:cons_plserv_min`       | MW  | 供給される電力をゼロより大きく制約します                                    |
| $C_{PS_{g,y,h}}^{\text{max}}$ | $P_{S_{b,y,h}} \leq P_{D_{b,y,h}}$                                               | `:cons_plserv_max`       | MW  | 供給される電力を負荷電力以下に制約します。                                   |
| $C_{PC_{g,y}}^{\text{min}}$   | $P_{C_{g,y}} \geq P_{C_{g,y}}^{\text{min}}$                                      | `:cons_pcap_min`         | MW  | 発電能力をその最小以下に制約します。                                      |
| $C_{PC_{g}}^{\text{max}}$     | $P_{C_{g,y}} \leq P_{C_{g,y}}^{\text{max}}\quad \forall y = y_{S_g}$             | `:cons_pcap_max`         | MW  | 発電能力をその最小の開始年においてその最小以下に制約します。                          |
| $C_{PL_{l,y,h}}^{+}$          | $P_{F_{l,y,h}} \leq P_{L_{l,y,h}}^{\text{max}}$                                  | `:cons_branch_pflow_pos` | MW  | ブランチの電力フローをその最大以下に制約します。                                |
| $C_{PL_{l,y,h}}^{-}$          | $-P_{F_{l,y,h}} \leq P_{L_{l,y,h}}^{\text{max}}$                                 | `:cons_branch_pflow_neg` | MW  | 負のブランチ電力フローをその最大以下に制約します。                               |
| $C_{PCGPB_{g,y}}$             | $P_{C_{g,y}} = 0 \quad \forall \left\{ y<y_{S_g} \right\}$                       | `N/A`                    | MW  | 発電能力を開始年以前にゼロに制約します。変数を固定することによって実装されます。                |
| $C_{PCGNA_{g,y}}$             | $P_{C_{g,y+1}} <= P_{C_{g,y}} \quad \forall \left\{ y >= y_{S_g} \right\}$       | `:cons_pcap_gen_noadd`   | MW  | 発電能力を開始年以降に非増加に制約します。発電能力は新しい発電機がその開始年に建設されるときのみ追加されます。 |
| $C_{PCGE_{g,y}}$              | $P_{C_{g,y}} == P_{C_{0_{g}}} \quad \forall \left\{ first y >= y_{S_g} \right\}$ | `:cons_pcap_gen_exog`    | MW  | 未建設の外生的発電機が`year_on`の後の最初の年に`pcap0`に建設されるように制約します。      |

# 目的

目的は`model[:obj]`を介してアクセスできる単一の式です。一般的に、目的に項を追加するには次のようにします：

  * [`add_obj_exp!`](@ref)
  * [`add_obj_term!`](@ref)
