```
magnetization_to_signal(resource, magnetization, parameters, trajectory, coordinates, coil_sensitivities)
```

信号のメモリを割り当て、`_signal_per_coil!`関数を使用して各コイルの信号を個別に計算します。

# 実装の詳細

`_signal_per_coil!`関数は、計算リソース（すなわち`resource`のタイプ）に応じて異なる実装を持っています。デフォルトの実装は、すべての時間点をループし、各時間点ごとに各ボクセル内の横方向の磁化の体積積分を計算します。このループの順序は必ずしも最適ではなく（パフォーマンスが異なる場合があります）、すべての軌道と計算リソースに対して最適ではありません。より良い実装が利用可能な場合は、特定のリソースと軌道の組み合わせに対してこの関数に新しいメソッドを追加してください。

「ボクセル」はワーカーに分散されていると仮定されています。各ワーカーは、自身が所有するボクセルに対してのみ（すべての時間点に対して）CPU1()コードを使用して体積積分を計算します。結果はすべてのワーカーで合計されます。

# 注意

複数のCPUを使用する場合、「ボクセル」はワーカーに分散されます。各ワーカーは、自身のボクセルに対して信号を並行して計算し、結果はすべてのワーカーで合計されます。
