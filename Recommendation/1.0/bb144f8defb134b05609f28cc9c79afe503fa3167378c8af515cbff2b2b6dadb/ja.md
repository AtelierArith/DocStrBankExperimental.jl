```
MPR
```

平均パーセンタイルランク（MPR）は、ユーザー $u$ のすべてのアイテムのソートされたリスト内でのアイテム $i$ のパーセンタイルランク $r_{i} \in [0, 100]$ に基づくランキングメトリックです。これは次のように定式化できます：

$$
\mathrm{MPR} = \frac{1}{|\mathcal{I}^+_u|} \sum_{i \in \mathcal{I}^+_u} r_{i}.
$$

$$
r_{i} = 0\%
$$

は、真のアイテム $i$ が推薦リストの最上位にランク付けされていることを意味する最良の値です。一方、$r_{i} = 100\%$ は、アイテム $i$ が最低ランクにある最悪のケースです。

MPR は、トップ-$N$ の推奨アイテムだけでなく、すべての非推奨アイテムも内部的に考慮し、真のポジティブに対してすべてのパーセンタイルランクを累積します。したがって、この指標はレコメンダーに対するユーザーの全体的な満足度を推定するのに適しています。直感的には、$\mathrm{MPR} > 50\%$ はユーザーの観点から見るとランダムなランキングよりも悪いはずです。

```
measure(
    metric::MPR,
    truth::AbstractVector{T},
    pred::AbstractVector{T}
)
```
