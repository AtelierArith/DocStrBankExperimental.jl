```
MPR
```

平均パーセンタイルランク (MPR) は、ユーザー $u$ のすべてのアイテムのソートされたリスト内でのアイテム $i$ のパーセンタイルランク $r_{i} \in [0, 100]$ に基づくランキングメトリックです。これは次のように定式化できます：

$$
\mathrm{MPR} = \frac{1}{|\mathcal{I}^+_u|} \sum_{i \in \mathcal{I}^+_u} r_{i}.
$$

$$
r_{i} = 0\%
$$

は、真のアイテム $i$ が推薦リストの最上位にランク付けされていることを意味する最良の値です。一方、$r_{i} = 100\%$ は、アイテム $i$ が最低ランクにある最悪のケースです。

MPR は、トップ-$N$ 推薦アイテムだけでなく、すべての非推薦アイテムも内部的に考慮し、MRR とは異なり、すべての真のポジティブに対してパーセンタイルランクを累積します。したがって、この指標はレコメンダーに対するユーザーの全体的な満足度を推定するのに適しています。直感的には、$\mathrm{MPR} > 50\%$ はユーザーの視点から見るとランダムなランキングよりも悪いはずです。

```
measure(
    metric::MPR,
    truth::AbstractVector{T},
    pred::AbstractVector{T}
)
```
