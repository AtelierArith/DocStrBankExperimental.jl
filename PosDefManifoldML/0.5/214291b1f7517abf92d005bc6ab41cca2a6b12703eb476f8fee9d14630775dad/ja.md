```julia
mutable struct Shrink <: Conditioner
        metric 
        radius 
        refpoint 
        reshape 
        epsilon 
        verbose 
        threaded 
        ## Fitted parameters
        Î³ 
        m 
        sd 
```

**æ¸¬åœ°ç·šåç¸®**ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒŠãƒ¼ã®å¯å¤‰æ§‹é€ ä½“ã€‚

æ­£å®šå€¤è¡Œåˆ—ã®å¤šæ§˜ä½“ã«ãŠã‘ã‚‹ç‚¹ã®é›†åˆ$ğ$ãŒä¸ãˆã‚‰ã‚ŒãŸã¨ãã€ã“ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒŠãƒ¼ã¯æŒ‡å®šã•ã‚ŒãŸ`metric`ã«å¾“ã£ã¦å®šç¾©ã•ã‚ŒãŸå¤šæ§˜ä½“ä¸Šã®æ¸¬åœ°ç·šã«æ²¿ã£ã¦ã™ã¹ã¦ã®ç‚¹ã‚’å˜ä½è¡Œåˆ—$I$ã«å‘ã‹ã£ã¦ç§»å‹•ã•ã›ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€$I$ã‚’ä¸­å¿ƒã¨ã—ãŸçƒãŒåŠ¹æœçš„ã«å®šç¾©ã•ã‚Œã¾ã™ã€‚

$$
I
$$

ã‹ã‚‰$ğ$ã®å„ç‚¹$P$ã¸ã®æ¸¬åœ°ç·šã®ã‚¹ãƒ†ãƒƒãƒ—ã‚µã‚¤ã‚º$Î³$ã¯æ¬¡ã®ã‚ˆã†ã«ä¸ãˆã‚‰ã‚Œã¾ã™ã€‚

$$
\gamma=\frac{r\sqrt{n}}{Î´(P, I) + Ïµ}
$$

ã“ã“ã§ã€$r$ã¯`radius`å¼•æ•°ã€$n$ã¯$P$ã®æ¬¡å…ƒã€$Î´(P, I)$ã¯æŒ‡å®šã•ã‚ŒãŸ`metric`ã«å¾“ã£ãŸ$P$ã®ãƒãƒ«ãƒ ã€$Ïµ$ã¯å¼•æ•°`epsilon`ã¨ã—ã¦ä¸ãˆã‚‰ã‚Œã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å°ã•ãªæ­£ã®æ•°ã§ã™ã€‚

ã“ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒŠãƒ¼ã«ã¯ã€æ§‹ç¯‰æ™‚ã«æ¸¡ã™ã“ã¨ãŒã§ãã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã§ã‚‚ã‚ã‚‹ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚

`.metric`ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ`PosDefManifold.Euclidean`ã®[Metric](https://marco-congedo.github.io/PosDefManifold.jl/dev/MainModule/#Metric::Enumerated-type-1)å‹ã§ã™ã€‚

åç¸®å¾Œã€ç‚¹ã®é›†åˆ$ğ$ã¯æ±‚ã‚ã‚‰ã‚ŒãŸ`.radius`ã‚’å–å¾—ã—ã¾ã™ã€‚ã“ã‚Œã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã¨ã—ã¦ä¸ãˆã‚‰ã‚Œã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.02ï¼‰ã€‚ã“ã‚Œã¯ã€å˜ä½è¡Œåˆ—ã‹ã‚‰ã®å–å¾—ã—ãŸè·é›¢ï¼ˆãƒãƒ«ãƒ ï¼‰ã®å°ºåº¦ã§ã‚ã‚Šã€å…·ä½“çš„ã«ã¯ã€`.refpoint`=:maxã®å ´åˆã¯æœ€å¤§è·é›¢ã€ã¾ãŸã¯`.refpoint`=:meanï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã®å ´åˆã¯å¹³å‡åå¿ƒç‡ã§ã™ã€‚æœ€åˆã®ã‚±ãƒ¼ã‚¹ã§ã¯ã€å¼•æ•°`radius`ã¯ã™ã¹ã¦ã®ç‚¹ã‚’åˆ¶é™ã™ã‚‹çƒã‚’å®šç¾©ã—ã€åŠå¾„ã¯å¤‰æ›ã•ã‚ŒãŸç‚¹ã®å˜ä½è¡Œåˆ—ã‹ã‚‰ã®æœ€å¤§è·é›¢+ $Ïµ$ã«ç­‰ã—ããªã‚Šã¾ã™ã€‚ç¬¬äºŒã®ã‚±ãƒ¼ã‚¹ã§ã¯ã€çƒã®å®Ÿéš›ã®åŠå¾„ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

$$
\sqrt{\frac{1}{n}\sum_{j=1}^{k}Î´(P_j, I) + Ïµ}
$$

ã€‚

`.reshape`ã¯ã€åç¸®å¾Œã«é›†åˆ$ğ$ã®å›ºæœ‰å€¤ã‚’å†å½¢æˆã™ã‚‹ãŸã‚ã®ãƒ–ãƒ¼ãƒ«å€¤ã§ã™ã€‚ã“ã‚Œã¯ãƒ•ã‚£ãƒƒã‚·ãƒ£ãƒ¼ï¼ˆã‚¢ãƒ•ã‚£ãƒ³ä¸å¤‰ï¼‰ãƒ¡ãƒˆãƒªãƒƒã‚¯ã«ã®ã¿é©ç”¨ã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseã€‚ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

`.epsilon`ã¯ã€ä¸Šè¨˜ã®$Ïµ$ã§ã‚ã‚‹éè² ã®å®Ÿæ•°ã§ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.0ã€‚

`.verbose`ã¯ãƒ–ãƒ¼ãƒ«å€¤ã§ã™ã€‚trueã®å ´åˆã€æƒ…å ±ãŒREPLã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseã€‚

`.threaded`ã¯ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ãƒ–ãƒ¼ãƒ«å€¤ã§ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: trueã€‚

ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«ã€`metric`ã¯å¼•æ•°ã§ã‚ã‚Šã€`radius`ã€`refpoint`ã€`reshape`ã€`epsilon`ã€`verbose`ã€ãŠã‚ˆã³`threaded`ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã§ã™ã€‚

**ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**

ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒŠãƒ¼ãŒãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã‚‹ã¨ã€æ¬¡ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ›¸ãè¾¼ã¾ã‚Œã¾ã™ã€‚

`.Î³`ã¯ã€$I$ã‹ã‚‰$ğ$ã®å„è¡Œåˆ—ã¸ã®æ¸¬åœ°ç·šã®ã‚¹ãƒ†ãƒƒãƒ—ã‚µã‚¤ã‚ºï¼ˆ`metric`ã«å¾“ã†ï¼‰ã§ã™ã€‚

`.m`ã¨`.sd`ã¯ã€åç¸®å¾Œã®é›†åˆã®å›ºæœ‰å€¤ã®å¹³å‡ã¨æ¨™æº–åå·®ã§ã™ã€‚ã“ã‚Œã¯ã€ãƒ•ã‚£ãƒƒã‚·ãƒ£ãƒ¼ãƒ¡ãƒˆãƒªãƒƒã‚¯ãŒæ¡ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã«ã®ã¿é©ç”¨ã•ã‚Œã‚‹å†å½¢æˆã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚å†å½¢æˆã¯ã€å…¥åŠ›ã‚»ãƒƒãƒˆãŒå†ä¸­å¿ƒåŒ–ã•ã‚Œã¦ã„ã‚‹å ´åˆã«ã®ã¿æ„å‘³ãŒã‚ã‚Šã¾ã™ï¼ˆ[`Recenter`](@refï¼‰ã‚’å‚ç…§ï¼‰ã€‚ã“ã‚Œã¯ã€åç¸®å¾Œã«é›†åˆã®å›ºæœ‰å€¤ã‚’å†ä¸­å¿ƒåŒ–ã—ï¼ˆå¹³å‡ = 1ï¼‰ã€æ¨™æº–åå·®ãŒ`.radius`ã«ç­‰ã—ããªã‚‹ã‚ˆã†ã«æ­£è¦åŒ–ã—ã¾ã™ã€‚

**ä¾‹**:

```julia
using PosDefManifoldML, PosDefManifold

# ãƒ•ã‚£ãƒƒã‚·ãƒ£ãƒ¼ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’æ¡ç”¨ã—ã€å†å½¢æˆã‚’ä½¿ç”¨ã™ã‚‹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒŠãƒ¼ã‚’ä½œæˆ
S = Shrink(PosDefManifold.Fisher; reshape = true)
```

**é–¢é€£é …ç›®**: [`fit!`](@ref), [`transform!`](@ref), [`crval`](@ref)
