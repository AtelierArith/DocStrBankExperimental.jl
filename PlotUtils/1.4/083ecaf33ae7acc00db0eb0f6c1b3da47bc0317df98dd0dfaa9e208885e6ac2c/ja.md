```
zscale(input::AbstractArray,
    nsamples=1000;
    contrast=0.25,
    max_reject=0.5,
    min_npixels=5,
    k_rej=2.5,
    max_iterations=5)
```

`input`の中央値付近のデータを示すカラーバーの制限を見つけるための`zscale` IRAF関数の実装。これは、天文学的画像のような極端な外れ値を持つデータに便利です。

## キーワード引数

  * `nsamples` - `input`から使用するサンプルの数。`nsamples`未満のサンプルしかない場合は、全入力を使用します。
  * `contrast` - 希望するコントラスト
  * `k_rej` - データが拒否される標準偏差の数
  * `max_iteration` - サンプルのフィッティングに使用される反復の数
  * `max_reject` - 反復フィッティング中に拒否される最大ピクセル数
  * `min_npixels` - 反復フィッティング後に制限を計算するための最小ピクセル数

技術的詳細については、拡張ヘルプ（REPLで`??zscale`）を参照してください。

## 例

```jldoctest
julia> img = 0:9999

julia> zscale(img)
(0, 9990)
```

## 拡張ヘルプ

## 説明

zscaleアルゴリズムは、完全な画像ヒストグラムを計算する時間のかかるプロセスなしに、中央値の画像値付近の画像値を表示するように設計されています。

これは、一般的に直接画像での背景空に対応する非常にピークのあるヒストグラムを持つ天文学的画像に特に便利です。

画像のサブセットが調査され、約`nsamples`ピクセルが画像全体に均等にサンプリングされます。行数はユーザーのパラメータである`nsample_lines`です。

ピクセルは明るさでランク付けされ、関数`I(i)`が形成されます。ここで、`i`はピクセルのランクであり、`I`はその値です。一般的に、この関数の中点（中央値）は画像ヒストグラムのピークに非常に近いです。中点の周りには、ヒストグラムの幅に関連する明確な傾斜があります。

`I(i)`関数の端には、フィールド内のオブジェクトや欠陥による非常に明るいピクセルと暗いピクセルがいくつかあります。傾斜を決定するために、反復的な拒否を用いて線形関数がフィットされます：

```
I(i) = intercept + slope * (i - midpoint)
```

ポイントの半分以上が拒否される場合、明確な傾斜はなく、サンプルの全範囲が`z1`と`z2`を定義します。そうでない場合、線形関数の端点が使用されます（元のサンプルの範囲内である限り）：

```
z1 = I(midpoint) + (slope / contrast) * (1 - midpoint)
z2 = I(midpoint) + (slope / contrast) * (npoints - midpoint)
```
