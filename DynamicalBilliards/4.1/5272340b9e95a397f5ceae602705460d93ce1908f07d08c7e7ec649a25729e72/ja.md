```
bdplot_interactive(bd::Billiard, ps::Vector{<:AbstractParticle}; kwargs...)
```

`bd`をプロットした新しい図を作成し、その中で`bd`内の`ps`の進化をアニメーションするためのさまざまなデータを初期化します。`fig, phs, chs`を返します。ここで、`fig`は図のインスタンスであり、`phs, chs`はカスタムアニメーションを作成するために使用できます。詳細は以下を参照してください。

## キーワード（インタラクティブ関連）

  * `playback_controls = true`: trueの場合、図とのライブインタラクションを可能にするコントロール（ポーズ/再生、リセット、ビリヤードプロット上でクリック＆ドラッグして新しい粒子を作成する機能）を追加します。

## キーワード（視覚化関連）

  * `dt = 0.001`: アニメーションは常に`dt`の時間ステップで発生します。スライダーは、プロットを更新する前に進化させる`dt`のステップ数を決定できます。
  * `plot_bmap = false`: trueの場合、境界マップを持つ2番目のプロットを追加します。
  * `colors = JULIADYNAMICS_CMAP` : シンボル（カラーマップ名）の場合、各粒子はマップから色を取得します。長さ`N`のベクトルの場合、各粒子はベクトルから色を取得します。長さが`N`未満のベクトルの場合、含まれる色の間で線形補間が行われます。
  * `tail_length = 1000`: 各粒子の最後の`tail_length`位置が視覚化されます。
  * `tail_width = 1`: dtailプロットの幅。
  * `fade = true`: テールの色がフェードアウトします。
  * `plot_particles = true`: テールの他に、粒子を散布図およびベクトルプロットとしてもプロットします。
  * `particle_size = 5`: 粒子散布図のマーカーサイズ。
  * `velocity_size = 0.05`: プロットされる前の粒子速度の乗数。
  * `bmap_size = 4`: 境界マップ散布図のマーカーサイズ。
  * `figure = NamedTuple()`: `Figure`作成に伝播されるキーワード。
  * `kwargs...`: 残りのキーワードはビリヤードプロットに伝播されます。

## カスタムアニメーション

各粒子のために2つのヘルパー構造が定義されています：

1. `ParticleHelper`: 各`dt`ステップで更新される量を含みます：粒子、最後の衝突から経過した時間、経過した総時間、テール（最後の`tail_length`の`dt`サイズのステップでの位置）。
2. `CollisionHelper`: 衝突時にのみ更新される量を含みます：衝突する障害物のインデックス、次の衝突までの時間、これまでの総衝突数、今後の衝突時の境界マップポイント。

これら2つのヘルパーは、シミュレーションをリアルタイムステッピング（1ステップ = `dt`時間）に変換するために必要です。従来のDynamicalBilliards.jlの離散時間ステッピング（1ステップ = 1衝突）とは異なります。

返される`phs, chs`は2つのオブザーバブルであり、1つは`ParticleHelpers`のベクトルを持ち、もう1つは`CollisionHelpers`のベクトルを持ちます。プロットされたすべての要素はこれらのオブザーバブルから引き上げられます。

エクスポートされた高レベル関数`bdplot_animstep!(phs, chs, bd, dt; update, intervals)`は、1つの`dt`ステップのためにシミュレーションを進めます。ユーザーはカスタムアニメーションのために`bdplot_animstep!`を使用するべきであり、例はオンラインのドキュメントに示されています。`update`キーワードが行う唯一のことは`notify!(phs)`です。プロット要素を更新する前に複数の`dt`ステップを進めたい場合は、`false`を使用できます。衝突が発生したときは、`chs`は常に通知されることに注意してください。`intervals`キーワードはデフォルトで`nothing`ですが、代わりに`arcintervals(bd)`であれば、衝突時に`chs`の境界マップフィールドも更新されます。 ```
