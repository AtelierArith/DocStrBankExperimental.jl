```
MeltingConstrainedFluxBalance(top_surface_temperature_solver=NonlinearSurfaceTemperatureSolver())
```

上部（または「上面」）温度 $Tᵤ$ を決定する境界条件を返します。これは上部の熱フラックスを平衡させるためのもので、

$$
Qₓ₁(Tᵤ) + Qₓ₂(Tᵤ) + ⋯ - Qᵢ = Σᴺ Qₓₙ(Tᵤ) - Qᵢ = δQ ,
$$

ここで $Qᵢ$ は氷内部から上部への内因的フラックス（通常は伝導フラックス）、$Qₓₙ$ は氷の上の空気への外部フラックスを表し、$δQ$ は残余フラックス、$Tᵤ$ は（上部）温度です。$Tᵤ$ は次の制約の下で評価されます。

$$
Tᵤ ≤ Tₘ(S),
$$

ここで $Tₘ(S)$ は氷の上部の塩分 $S$ の関数である融解温度です。$Tᵤ < Tₘ(S)$ の場合、上部は凍結しており、$δQ = 0$ です。制約が作用して $Tᵤ = Tₘ(S)$ となると、上部は融解しており、残余フラックスはゼロではありません。

$$
δQ ≡ Σᴺ Qₙ(Tₘ) - Qᵢ(Tₘ).
$$

残余フラックスは氷を液体水に変換するコストに消費され、氷の厚さ $h$ の変化率に関連しています。

$$
\frac{dhₛ}{dt} = δQ / ℒ(Tᵤ)
$$

ここで $ℒ(Tᵤ)$ は潜熱であり、温度 $Tᵤ$ における液体水の高い内部エネルギーと固体氷の低い内部エネルギーの差に等しいです。
